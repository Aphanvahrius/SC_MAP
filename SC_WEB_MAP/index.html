<!doctype html>
<!--MAIN -->
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="stylesheet" href="css/specialElements.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/leaflet-search.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/filter.css">
        <link rel="stylesheet" href="css/nouislider.min.css">
        <link rel="stylesheet" href="css/leaflet-measure.css">
        <link rel="stylesheet" href="css/leaflet.fullscreen.css">

        <style>
            html, body, #map {
                width: 100%;
                height: 100%;
                padding: 0;
                margin: 0;
            }
            .spoiler {
                color: #800000;
                background-color: #aaaaba;
                padding: 2px 5px;
                cursor: pointer;
                font-weight: 900;
            }
            .spoiler:hover {
                text-decoration: underline;
            }
            .crossed {
                text-decoration: line-through;
            }
        </style>
        <title>ShipCore Interactive Map</title>
    </head>

    <body style="background-image: linear-gradient(to right, #0f0c29, #302b63, #24243e); color: #eeeefe; text-shadow: 0.2px 0.1px 1px rgba(80, 80, 80, 0.8); overflow: hidden;">
        <div id="map"></div>

        <script src="js/leaflet.js"></script>
        <script src="js/leaflet-svg-shape-markers.js"></script>
        <script src="https://unpkg.com/georaster"></script>
        <script src="https://unpkg.com/georaster-layer-for-leaflet/dist/georaster-layer-for-leaflet.min.js"></script>
        <script src='js/Leaflet.fullscreen.js'></script>
        <script src="js/multi-style-layer.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet-measure.js"></script>
        <script src="js/leaflet-search.js"></script>
        <script src="js/nouislider.min.js"></script>
        <script src="js/wNumb.js"></script>
        <script src="data/Regions_0.js"></script>
        <script src="data/Lanes_1.js"></script>
        <script src="data/Systems_2.js"></script>
        <script src="data/Sectors_3.js"></script>
        <script src="data/Characters_4.js"></script>
        <script src="data/Routes_5.js"></script>
        <script src="data/Diplomacy_6.js"></script>
        <script src="data/Subregions_7.js"></script>
        <script src="data/mining_systems.js"></script>
        <script src="data/industrial_systems.js"></script>
        <script src="data/core_systems.js"></script>
        <script src="data/capital_systems.js"></script>
        <script src="js/popups.js"></script>
        <script src="js/gradient-definitions.js"></script>
        <script src="js/layer-styles.js"></script>
        <script src="js/general-functions.js"></script>
        <script src="js/controls.js"></script>

        <svg width="0" height="0" style="position:absolute;"><defs></defs></svg>

        <script>
            // Create map
            var zoomOptions = {zoomControl:true, zoomSnap:0.5, zoomDelta:0.5, maxZoom:15, minZoom:10, zoom:10, maxBoundsViscosity: 0.85};
            var map = L.map('map', zoomOptions);

            var hash = new L.Hash(map);

            // Coords popup
            //map.on('click', display_Coords);

            // Create attributions
            map.attributionControl.setPrefix('\
                <a href="https://github.com/tomchadwin/qgis2web" target="_blank" rel="noopener noreferrer">qgis2web</a> &middot;\
                <a href="https://leafletjs.com" title="A JS library for interactive maps" target="_blank" rel="noopener noreferrer">Leaflet</a> &middot;\
                <a href="https://qgis.org" target="_blank" rel="noopener noreferrer">QGIS</a> &middot;\
                <a href="https://www.royalroad.com/fiction/41463/shipcore" target="_blank" rel="noopener noreferrer">ShipCore</a>',
            {position: null});

            // Create autolinker
            var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});       

            //Create bounds group
            var bounds_group = new L.featureGroup([]);

            // Create local Geoserver connection
            //wmsGeoServer = 'http://localhost:8081/geoserver/Shipcore/wms'

            // Colect gradient fills for regions
            var gradientDefs = document.querySelector('svg defs');
            gradientDefs.appendChild(gradientStyleCS());
            gradientDefs.appendChild(gradientStyleHER());
            gradientDefs.appendChild(gradientStyleSF());
            gradientDefs.appendChild(gradientStyleSI());
            gradientDefs.appendChild(gradientStyleDoM());
            gradientDefs.appendChild(gradientStyleDoD());
            gradientDefs.appendChild(gradientStyleFPA());
            gradientDefs.appendChild(gradientStyleWFS());
            gradientDefs.appendChild(gradientStyleGS());
            gradientDefs.appendChild(gradientStyleSR());

            // Set layer order
            const order = {
                base: 290,
                regions: 300,
                sectors: 310,
                diplomacy: 315,
                subregions: 317,
                lanes: 320,
                routes: 330,
                characters: 340,
                systems: 350,
                mining_systems: 351,
                industrial_systems: 352,
                core_systems: 353,
                capital_systems: 354
            };

            //Create regions layer
            map.createPane('pane_Regions_0');
            map.getPane('pane_Regions_0').style.zIndex = order.regions;
            map.getPane('pane_Regions_0').style['mix-blend-mode'] = 'normal';

            var layer_Regions_0 = new L.geoJson(json_Regions_0, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Regions_0',
                layerName: 'layer_Regions_0',
                pane: 'pane_Regions_0',
                onEachFeature: pop_Regions_0,
                style: style_Regions_0_0,
            });
            bounds_group.addLayer(layer_Regions_0);
            map.addLayer(layer_Regions_0);

            // Create starlanes layer
            map.createPane('pane_Lanes_1');
            map.getPane('pane_Lanes_1').style.zIndex = order.lanes;
            map.getPane('pane_Lanes_1').style['mix-blend-mode'] = 'normal';

            // Starlanes Web
            var layer_Lanes_1 = new L.geoJson.multiStyle(json_Lanes_1, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Lanes_1',
                layerName: 'layer_Lanes_1',
                pane: 'pane_Lanes_1',
                onEachFeature: pop_Lanes_1,
                styles: [style_Lanes_1_0,style_Lanes_1_1,]
            });
            bounds_group.addLayer(layer_Lanes_1);
            /*
            //Starlanes Local
            var layer_Lanes_1 = L.tileLayer.wms(wmsGeoServer, {
                version: '1.1.1',
                request: 'GetMap',
                layers: 'Shipcore:lanes',
                srs: 'EPSG:3395',
                format: 'image/png',
                pane: 'pane_Lanes_1',
                transparent: true
            });
            */
            map.addLayer(layer_Lanes_1);

            // Create star systems layer
            map.createPane('pane_Systems_2');
            map.getPane('pane_Systems_2').style.zIndex = order.systems;
            map.getPane('pane_Systems_2').style['mix-blend-mode'] = 'normal';

            var layer_Systems_2 = new L.geoJson(json_Systems_2, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Systems_2',
                layerName: 'layer_Systems_2',
                pane: 'pane_Systems_2',
                onEachFeature: pop_Systems_2,
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.circleMarker(latlng, style_Systems_2_0(feature));
                },
            });
            bounds_group.addLayer(layer_Systems_2);
            map.addLayer(layer_Systems_2);

            // Create econimic sectors layer
            map.createPane('pane_Sectors_3');
            map.getPane('pane_Sectors_3').style.zIndex = order.sectors;
            map.getPane('pane_Sectors_3').style['mix-blend-mode'] = 'normal';

            var layer_Sectors_3 = new L.geoJson(json_Sectors_3, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Sectors_3',
                layerName: 'layer_Sectors_3',
                pane: 'pane_Sectors_3',
                onEachFeature: pop_Sectors_3,
                style: style_Sectors_3_0,
            });
            bounds_group.addLayer(layer_Sectors_3);

            // Create characters' travels layer
            map.createPane('pane_Characters_4');
            map.getPane('pane_Characters_4').style.zIndex = order.characters;
            map.getPane('pane_Characters_4').style['mix-blend-mode'] = 'normal';

            var layer_Characters_4 = new L.geoJson.multiStyle(json_Characters_4, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Characters_4',
                layerName: 'layer_Characters_4',
                pane: 'pane_Characters_4',
                onEachFeature: pop_Characters_4,
                styles: [style_Characters_4_0,style_Characters_4_1,]
            });
            bounds_group.addLayer(layer_Characters_4);
            map.addLayer(layer_Characters_4);

            // Create trade routes layer
            map.createPane('pane_Routes_5');
            map.getPane('pane_Routes_5').style.zIndex = order.routes;
            map.getPane('pane_Routes_5').style['mix-blend-mode'] = 'normal';

            var layer_Routes_5 = new L.geoJson.multiStyle(json_Routes_5, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Routes_5',
                layerName: 'layer_Routes_5',
                pane: 'pane_Routes_5',
                onEachFeature: pop_Routes_5,
                styles: [style_Routes_5_0,style_Routes_5_1,]
            });
            bounds_group.addLayer(layer_Routes_5);

            // Create diplomacy layer
            map.createPane('pane_Diplomacy_6');
            map.getPane('pane_Diplomacy_6').style.zIndex = order.diplomacy;
            map.getPane('pane_Diplomacy_6').style['mix-blend-mode'] = 'normal';

            var layer_Diplomacy_6 = new L.geoJson(json_Diplomacy_6, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Diplomacy_6',
                layerName: 'layer_Diplomacy_6',
                pane: 'pane_Diplomacy_6',
                onEachFeature: pop_Diplomacy_6,
                style: style_Diplomacy_6_0,
            });
            bounds_group.addLayer(layer_Diplomacy_6);
            map.addLayer(layer_Diplomacy_6);

            // Create subregions layer
            map.createPane('pane_subregions_7');
            map.getPane('pane_subregions_7').style.zIndex = order.subregions;
            map.getPane('pane_subregions_7').style['mix-blend-mode'] = 'normal';

            // Subregions Web
            var layer_Subregions_7 = new L.geoJson(json_subregions_7, {
                attribution: '',
                interactive: false,
                dataVar: 'json_subregions_7',
                layerName: 'layer_Subregions_7',
                pane: 'pane_subregions_7',
                style: style_subregions_7_0,
            });
            bounds_group.addLayer(layer_Subregions_7);
            
            /*
            // Subregions Local
            wmsServerSB = 'http://localhost/cgi-bin/mapserv.exe?map=C:/Users/mcier/Documents/ArcGIS/Projects/shipcore/QGIS/Git/SC_MAP/SC_WEB_MAP/mapserver/subregions.map'
            var layer_Subregions_7 = L.tileLayer.wms(wmsServerSB, {
                version: '1.1.1',
                request: 'GetMap',
                layers: 'subregions',
                srs: 'EPSG:3395',
                format: 'image/png',
                pane: 'pane_subregions_7',
                transparent: true
            });
            */
            // Create basemaps
            map.createPane('pane_basemap');
            map.getPane('pane_basemap').style.zIndex = order.base;
            map.getPane('pane_basemap').style['mix-blend-mode'] = 'normal';

            // Basemaps Web
            /*
            let baseMaps;
            let layer_basemap_1;
            let layer_basemap_2;
            let basemap_control;
            async function loadBasemaps() {
                layer_basemap_1 = await loadGeoRaster('data/basemaps/basemap_1.tif', {
                    attribution: '',
                    interactive: false,
                    pane: 'pane_basemap'
                });
                layer_basemap_2 = await loadGeoRaster('data/basemaps/basemap_2.tif', {
                    attribution: '',
                    interactive: false,
                    pane: 'pane_basemap'
                });
                baseMaps = {'James Webb Space Telescope': layer_basemap_2, 'Nanite Interstallar Imaging': layer_basemap_1};
                basemap_control = new L.control.layers(null, baseMaps,{
                    position: 'bottomright',
                    collapsed:false,
                });
                basemap_control.addTo(map);
            }
            loadBasemaps()
            */

            // Basemaps Mapserver
            wmsServer = 'http://localhost/cgi-bin/mapserv.exe?map=C:/Users/mcier/Documents/ArcGIS/Projects/shipcore/QGIS/Git/SC_MAP/SC_WEB_MAP/mapserver/shipcore_basemap_2.map';
            var layer_basemap_2 = L.tileLayer.wms(wmsServer, {
                version: '1.1.1',
                request: 'GetMap',
                layers: 'jwst_raster',
                styles: '',
                srs: 'EPSG:3395',
                bbox: '-153000,-100000,222000,163000',
                width: '256',
                height: '256',
                format: 'image/png',
                pane: 'pane_basemap',
                transparent: true
            });
            
            wmsServer = 'http://localhost/cgi-bin/mapserv.exe?map=C:/Users/mcier/Documents/ArcGIS/Projects/shipcore/QGIS/Git/SC_MAP/SC_WEB_MAP/mapserver/shipcore_basemap_1.map';
            var layer_basemap_1 = L.tileLayer.wms(wmsServer, {
                version: '1.1.1',
                request: 'GetMap',
                layers: 'sc_raster',
                styles: '',
                srs: 'EPSG:3395',
                bbox: '-109000,-100000,177000,163000',
                width: '256',
                height: '256',
                format: 'image/png',
                pane: 'pane_basemap',
                transparent: true
            });

            baseMaps = {'JWST': layer_basemap_2, 'Shipcore': layer_basemap_1};
            basemap_control = new L.control.layers(null, baseMaps,{
                position: 'bottomright',
                collapsed:false,
            });
            basemap_control.addTo(map);


            // Basemaps Geoserver
            /*
            var layer_basemap_2 = L.tileLayer.wms(wmsGeoServer, {
                version: '1.1.1',
                request: 'GetMap',
                layers: 'Shipcore:basemap_2',
                srs: 'EPSG:3395',
                pane: 'pane_basemap',
                transparent: true
            });

            var layer_basemap_1 = L.tileLayer.wms(wmsGeoServer, {
                version: '1.1.1',
                request: 'GetMap',
                layers: 'Shipcore:basemap_1',
                srs: 'EPSG:3395',
                pane: 'pane_basemap',
                transparent: true
            });
            baseMaps = {'JWST': layer_basemap_2, 'Shipcore': layer_basemap_1};
            */

            // Create Mining Systems Layer
            map.createPane('pane_mining_systems');
            map.getPane('pane_mining_systems').style.zIndex = order.mining_systems;
            map.getPane('pane_mining_systems').style['mix-blend-mode'] = 'normal';

            // Mining Systems Web
            var layer_mining_systems = new L.geoJson(json_mining_systems, {
                attribution: '',
                interactive: false,
                dataVar: 'json_mining_systems',
                layerName: 'layer_mining_systems',
                pane: 'pane_mining_systems',
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.shapeMarker(latlng, style_mining_systems(feature));
                },
            });
            bounds_group.addLayer(layer_mining_systems);

            // Mining Systems Local
            /*
            wmsServerMS = 'http://localhost/cgi-bin/mapserv.exe?map=C:/Users/mcier/Documents/ArcGIS/Projects/shipcore/QGIS/Git/SC_MAP/SC_WEB_MAP/mapserver/mining_systems.map';
            var layer_mining_systems = L.tileLayer.wms(wmsServerMS, {
                version: '1.1.1',
                request: 'GetMap',
                layers: 'mining_sts',
                srs: 'EPSG:3395',
                format: 'image/png',
                pane: 'pane_mining_systems',
                transparent: true
            });
            */
            // Create Industrial Systems layer
            map.createPane('pane_industrial_systems');
            map.getPane('pane_industrial_systems').style.zIndex = order.industrial_systems;
            map.getPane('pane_industrial_systems').style['mix-blend-mode'] = 'normal';

            // Industrial Systems Web
            var layer_industrial_systems = new L.geoJson(json_industrial_systems, {
                attribution: '',
                interactive: false,
                dataVar: 'json_industrial_systems',
                layerName: 'layer_industrial_systems',
                pane: 'pane_industrial_systems',
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.shapeMarker(latlng, style_industrial_systems(feature));
                },
            });

            // Industrial Systems Local
            /*
            wmsServerIS = 'http://localhost/cgi-bin/mapserv.exe?map=C:/Users/mcier/Documents/ArcGIS/Projects/shipcore/QGIS/Git/SC_MAP/SC_WEB_MAP/mapserver/industrial_systems.map';
            var layer_industrial_systems = L.tileLayer.wms(wmsServerIS, {
                version: '1.1.1',
                request: 'GetMap',
                layers: 'industrial_sts',
                srs: 'EPSG:3395',
                format: 'image/png',
                pane: 'pane_Industrial_Systems',
                transparent: true
            });
            */
            // Create Core Systems layer
            map.createPane('pane_core_systems');
            map.getPane('pane_core_systems').style.zIndex = order.core_systems;
            map.getPane('pane_core_systems').style['mix-blend-mode'] = 'normal';

            // Core Systems Web
            var layer_core_systems = new L.geoJson(json_core_systems, {
                attribution: '',
                interactive: false,
                dataVar: 'json_core_systems',
                layerName: 'layer_core_systems',
                pane: 'pane_core_systems',
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.shapeMarker(latlng, style_core_systems(feature));
                },
            });
            bounds_group.addLayer(layer_core_systems);

            /*
            // Core Systems Local
            var layer_core_systems = L.tileLayer.wms(wmsGeoServer, {
                version: '1.1.1',
                request: 'GetMap',
                layers: 'Shipcore:core_systems',
                srs: 'EPSG:3395',
                format: 'image/png',
                pane: 'pane_core_Systems',
                transparent: true
            });
            */
            // Create Capital Systems layer
            map.createPane('pane_capital_systems');
            map.getPane('pane_capital_systems').style.zIndex = order.capital_systems;
            map.getPane('pane_capital_systems').style['mix-blend-mode'] = 'normal';

            // Capital Systems Web
            var layer_capital_systems = new L.geoJson(json_capital_systems, {
                attribution: '',
                interactive: false,
                dataVar: 'json_capital_systems',
                layerName: 'layer_capital_systems',
                pane: 'pane_capital_systems',
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.shapeMarker(latlng, style_capital_systems(feature));
                },
            });
            bounds_group.addLayer(layer_capital_systems);

            // Capital Systems Local
            /*
            var layer_capital_systems = L.tileLayer.wms(wmsGeoServer, {
                version: '1.1.1',
                request: 'GetMap',
                layers: 'Shipcore:capital_systems',
                srs: 'EPSG:3395',
                format: 'image/png',
                pane: 'pane_Capital_Systems',
                transparent: true
            });
            */
            // Create system search tool
            map.addControl(new L.Control.Search({
                layer: layer_Systems_2,
                initial: false,
                hideMarkerOnCollapse: true,
                propertyName: 'System_Nam'
            }));
            document.getElementsByClassName('search-button')[0].className += ' fa fa-binoculars';
            
            // Create distance/area measuring tool
            measureControl.addTo(map);
            document.getElementsByClassName('leaflet-control-measure-toggle')[0].innerHTML = '';
            document.getElementsByClassName('leaflet-control-measure-toggle')[0].className += ' fas fa-ruler';  

            // Create map fullscreen control
            map.addControl(new L.Control.Fullscreen());

            // Create legend
            var pointOverlays = {
                '<span class="layer-name">Systems</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Systems_2_11.png" /></td>\
                        <td>Star System</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Systems_2_00.png" /></td>\
                        <td>System With No Star</td>\
                    </tr>\
                </table>': layer_Systems_2,
                '<span>Mining Systems</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Systems_Mng.png" /></td>\
                        <td></td>\
                    </tr>\
                </table>': layer_mining_systems,
                '<span>Industrial Systems</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Systems_Idstr.png" /></td>\
                        <td></td>\
                    </tr>\
                </table>': layer_industrial_systems,
                '<span>Core Systems</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Systems_Core.png" /></td>\
                        <td></td>\
                    </tr>\
                </table>': layer_core_systems,
                '<span>Capital Systems</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Systems_Cptl.png" /></td>\
                        <td></td>\
                    </tr>\
                </table>\
                <!--<span class="layer-name">Basemaps</span><br />-->': layer_capital_systems,
                //'<span>James Webb Space Telescope</span><br />': baseMaps['JWST'],
                //'<span>Nanite Interstallar Imaging</span><br />': baseMaps['Shipcore']
            }
          
            var pointControl = new L.control.layers(null, pointOverlays,{
                position: 'bottomleft',
                collapsed:true,
            });
            pointControl.addTo(map);

            var polygonOverlays = {
                '<span class="layer-name">Regions</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_CorporateSystems0.png" /></td>\
                        <td>Corporate Systems</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_DuchyOfDrakar1.png" /></td>\
                        <td>Duchy Of Drakar</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_DuchyOfMeltisar2.png" /></td>\
                        <td>Duchy Of Meltisar</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_FreePlanetsAlliance3.png" /></td>\
                        <td>Free Planets Alliance</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_GhostSector4.png" /></td>\
                        <td>Ghost Sector</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_HolyErtanRepublic5.png" /></td>\
                        <td>Holy Ertan Republic</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_SolarImperium6.png" /></td>\
                        <td>Solar Imperium</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_SolarianFederation7.png" /></td>\
                        <td>Solarian Federation</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_TheWesternFrontierSystems8.png" /></td>\
                        <td>The Western Frontier Systems</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_StarlightRevolution9.png" /></td>\
                        <td>Starlight Revolution</td>\
                    </tr>\
                </table>': layer_Regions_0,

                '<span class="layer-name">Diplomacy</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Diplomacy_6_Self0.png" /></td>\
                        <td>Self</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Diplomacy_6_Friendly1.png" /></td>\
                        <td>Friendly</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Diplomacy_6_Amicable2.png" /></td>\
                        <td>Amicable</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Diplomacy_6_Neutral3.png" /></td>\
                        <td>Neutral</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Diplomacy_6_Reserved4.png" /></td>\
                        <td>Reserved</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Diplomacy_6_Hostile5.png" /></td>\
                        <td>Hostile</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Diplomacy_6_AtWar6.png" /></td>\
                        <td>At War</td>\
                    </tr>\
                </table>': layer_Diplomacy_6,                
                /*
                '<span class="layer-name">Economic Sectors</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Sectors_3_AgrarianSector0.png" /></td>\
                        <td>Agrarian Sector</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Sectors_3_ConsumerSector1.png" /></td>\
                        <td>Consumer Sector</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Sectors_3_AutarkicSector2.png" /></td>\
                        <td>Autarkic Sector</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Sectors_3_FreePlanetsAlliance3.png" /></td>\
                        <td>Free Planets Alliance</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Sectors_3_FrontierSector4.png" /></td>\
                        <td>Frontier Sector</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Sectors_3_IndustrialSector5.png" /></td>\
                        <td>Industrial Sector</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Sectors_3_ResearchSector6.png" /></td>\
                        <td>Research Sector</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Sectors_3_TradeSector7.png" /></td>\
                        <td>Trade Sector</td>\
                    </tr>\
                </table>': layer_Sectors_3,
                */
            }
            var polygonControl = new L.control.layers(null,polygonOverlays,{
                position: 'topright',
                collapsed: false
            });
            polygonControl.addTo(map);

            var lineOverlays = {
                '<span class="layer-name">Subregions</span><br />': layer_Subregions_7,
                
                '<span class="layer-name">Lanes</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Lanes_1_InDevelopement0.png" /></td>\
                        <td>In Developement</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Lanes_1_Operational1.png" /></td>\
                        <td>Operational</td>\
                    </tr>\
                </table>': layer_Lanes_1,

                '<span class="layer-name">Character Journey</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Characters_4_Abbey0.png" /></td>\
                        <td>Abbey</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Characters_4_Alex1.png" /></td>\
                        <td>Alex</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Characters_4_Elis2.png" /></td>\
                        <td>Elis</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Characters_4_Thea3.png" /></td>\
                        <td>Thea</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Characters_4_Tia4.png" /></td>\
                        <td>Tia</td>\
                    </tr>\
                </table>': layer_Characters_4,
            }
            var lineControl = new L.control.layers(null,lineOverlays,{
                position: 'topleft',
                collapsed: true
            });
            lineControl.addTo(map);
            
            map.on("zoomend", function(){
                if (map.hasLayer(layer_Systems_2)) {
                    if (map.getZoom() <= 10 && map.getZoom() >= 15) {
                            layer_Systems_2.eachLayer(function (layer) {
                                layer.openTooltip();
                            });
                        } else {
                            layer_Systems_2.eachLayer(function (layer) {
                                layer.closeTooltip();
                            });
                        }
                    }
            });

            setBounds();
            if (map.hasLayer(layer_Systems_2)) {
                if (map.getZoom() <= 10 && map.getZoom() >= 15) {
                    layer_Systems_2.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_Systems_2.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }

            // Define website structure
            var row = document.createElement('div');
            row.className="row";
            row.id="all";
            row.style.height = "100%";

            var col1 = document.createElement('div');
            col1.className="col9";
            col1.id = "mapWindow";
            col1.style.height = "100%";
            col1.style.width = "80%";
            col1.style.display = "inline-block";

            var col2 = document.createElement('div');
            col2.className="col3";
            col2.id = "menu";
            col2.style.display = "inline-block";

            var mapDiv = document.getElementById('map');
            mapDiv.style.height = "93%";
            mapDiv.parentNode.insertBefore(row, mapDiv);
            document.getElementById("all").appendChild(col1);
            document.getElementById("all").appendChild(col2);

            var mapTitle = document.createElement('div');
            mapTitle.innerHTML  = 'Shipcore Interactive Map';
            mapTitle.className = 'maptitle';
            mapTitle.style.height = "7%";

            col1.appendChild(mapTitle)
            col1.appendChild(mapDiv)
            
            // Define filter variables
            var Filters = {
                "Orbtl_Clny": "int",
                //"Unexplored": "int",
                //"Notbl_Minb": "int",
                "Inhabitabl": "int",
                "Nation": "str",
                "Star_Presc": "str",
                "Unsurv_bod": "str",
                "New_Lane": "str",
                "System_Nam": "str",
                "Type": "str",
                "Status": "str",
                "Character": "str",
                "Book": "str",
                //"Sector": "str"
            };
            
            // Main filtering function
            function filterFunc() {
                map.eachLayer(function(lyr){
                    if ("options" in lyr && "dataVar" in lyr["options"]){
                        features = this[lyr["options"]["dataVar"]].features.slice(0);
                        try{
                            for (key in Filters){
                                keyS = key.replace(/[^a-zA-Z0-9_]/g, "")
                                if (Filters[key] == "str" || Filters[key] == "bool"){
                                    var selection = [];
                                    var options = document.getElementById("sel_" + keyS).options
                                    for (var i=0; i < options.length; i++) {
                                        if (options[i].selected) selection.push(options[i].value);
                                    }
                                    try{
                                        if (key in features[0].properties){
                                            for (i = features.length - 1; i >= 0; --i){
                                                if (selection.indexOf(features[i].properties[key])<0 && selection.length>0) {
                                                    features.splice(i,1);
                                                }
                                            }
                                        }
                                    } catch(err){}
                                }

                                if (Filters[key] == "int"){
                                    sliderVals =  document.getElementById("div_" + keyS).noUiSlider.get();
                                    try{
                                        if (key in features[0].properties){
                                            for (i = features.length - 1; i >= 0; --i){
                                                var propertyValue = parseInt(features[i].properties[key]);
                                                if (isNaN(propertyValue)){
                                                    propertyValue = 0;
                                                }
                                                if (propertyValue < sliderVals[0] || propertyValue > sliderVals[1]){
                                                        features.splice(i,1);
                                                }
                                            }
                                        }
                                    } catch(err){}
                                }

                                if (Filters[key] == "real"){
                                    sliderVals =  document.getElementById("div_" + keyS).noUiSlider.get();
                                    try{
                                        if (key in features[0].properties){
                                            for (i = features.length - 1; i >= 0; --i){
                                                var propertyValue = parseFloat(features[i].properties[key]);
                                                if (isNaN(propertyValue)){
                                                    propertyValue = 0;
                                                }
                                                if (propertyValue < sliderVals[0] || propertyValue > sliderVals[1]){
                                                        features.splice(i,1);
                                                }
                                            }
                                        }
                                    } catch(err){}
                                }

                                if (Filters[key] == "date" || Filters[key] == "datetime" || Filters[key] == "time"){
                                    try{
                                        if (key in features[0].properties){
                                            HTMLkey = key.replace(/[&\/\\#,+()$~%.'":*?<>{} ]/g, '');
                                            startdate = document.getElementById("dat_" + HTMLkey + "_date1").value.replace(" ", "T");
                                            enddate = document.getElementById("dat_" + HTMLkey + "_date2").value.replace(" ", "T");
                                            for (i = features.length - 1; i >= 0; --i){
                                                if (features[i].properties[key] < startdate || features[i].properties[key] > enddate){
                                                    features.splice(i,1);
                                                }
                                            }
                                        }
                                    } catch(err){}
                                }
                            }
                        } catch(err){}
                        this[lyr["options"]["layerName"]].clearLayers();
                        this[lyr["options"]["layerName"]].addData(features);
                    }
                })
            }

            // Create Orbital/Colony Slider Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var menu_header = document.createElement('div');
            menu_header.innerHTML  = 'FILTERS';
            menu_header.className = 'menuheader';
            document.getElementById("menu").appendChild(menu_header);

            var lab_Orbtl_Clny = document.createElement('div');
            lab_Orbtl_Clny.innerHTML  = 'ORBITALS / COLONIES: <span id="val_Orbtl_Clny"></span>';
            lab_Orbtl_Clny.className = 'filterlabel';
            document.getElementById("menu").appendChild(lab_Orbtl_Clny);

            var reset_Orbtl_Clny = document.createElement('div');
            reset_Orbtl_Clny.innerHTML = '<button>clear filter</button>';
            reset_Orbtl_Clny.className = 'filterlabel';
            lab_Orbtl_Clny.className = 'filterlabel';
            reset_Orbtl_Clny.onclick = function() {
                sel_Orbtl_Clny.noUiSlider.reset();
            };
            document.getElementById("menu").appendChild(reset_Orbtl_Clny);

            var div_Orbtl_Clny = document.createElement("div");
            div_Orbtl_Clny.id = "div_Orbtl_Clny";
            div_Orbtl_Clny.className = "slider";
            document.getElementById("menu").appendChild(div_Orbtl_Clny);

            var sel_Orbtl_Clny = document.getElementById('div_Orbtl_Clny');
            noUiSlider.create(sel_Orbtl_Clny, {
                connect: true,
                start: [0, 258],
                step: 1,
                format: wNumb({
                    decimals: 0,
                    }),
                range: {
                min: 0,
                max: 258
                }
            });
            sel_Orbtl_Clny.noUiSlider.on('update', function (values) {
            filterVals =[];
            for (value in values){
                filterVals.push(parseInt(value))
            }
            val_Orbtl_Clny = document.getElementById('val_Orbtl_Clny');
            val_Orbtl_Clny.innerHTML = values.join(' - ');
                filterFunc()
            });

            // Create Inhabitable Planets Slider Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var lab_Inhabitabl = document.createElement('div');
            lab_Inhabitabl.innerHTML  = 'INHABITABLE WORLDS: <span id="val_Inhabitabl"></span>';
            lab_Inhabitabl.className = 'filterlabel';
            document.getElementById("menu").appendChild(lab_Inhabitabl);

            var reset_Inhabitabl = document.createElement('div');
            reset_Inhabitabl.innerHTML = '<button>clear filter</button>';
            reset_Inhabitabl.className = 'filterlabel';
            lab_Inhabitabl.className = 'filterlabel';
            reset_Inhabitabl.onclick = function() {
                sel_Inhabitabl.noUiSlider.reset();
            };
            document.getElementById("menu").appendChild(reset_Inhabitabl);

            var div_Inhabitabl = document.createElement("div");
            div_Inhabitabl.id = "div_Inhabitabl";
            div_Inhabitabl.className = "slider";
            document.getElementById("menu").appendChild(div_Inhabitabl);

            var sel_Inhabitabl = document.getElementById('div_Inhabitabl');
            noUiSlider.create(sel_Inhabitabl, {
                connect: true,
                start: [0, 4],
                step: 1,
                format: wNumb({
                    decimals: 0,
                    }),
                range: {
                min: 0,
                max: 4
                }
            });
            sel_Inhabitabl.noUiSlider.on('update', function (values) {
            filterVals =[];
            for (value in values){
                filterVals.push(parseInt(value))
            }
            val_Inhabitabl = document.getElementById('val_Inhabitabl');
            val_Inhabitabl.innerHTML = values.join(' - ');
                filterFunc()
            });

            // Create Region Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_Nation = document.createElement('div');
            div_Nation.id = "div_Nation";
            div_Nation.className= "filterselect";
            document.getElementById("menu").appendChild(div_Nation);
            sel_Nation = document.createElement('select');
            sel_Nation.multiple = true;
            sel_Nation.size = 6;
            sel_Nation.id = "sel_Nation";

            var lab_Nation = document.createElement('div');
            lab_Nation.innerHTML = 'REGION / DIPLOMACY';
            lab_Nation.className = 'filterlabel';
            div_Nation.appendChild(lab_Nation);

            var reset_Nation = document.createElement('div');
            reset_Nation.innerHTML = '<button>clear filter</button>';
            reset_Nation.className = 'filterlabel';
            reset_Nation.onclick = function() {
                var options = document.getElementById("sel_Nation").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Nation.appendChild(reset_Nation);

            var Nation_options_str = "";
            sel_Nation.onchange = function(){filterFunc()};
            Nation_options_str  += '<option value="Corporate Systems">Corporate Systems</option>';
            Nation_options_str  += '<option value="Duchy of Drakar">Duchy of Drakar</option>';
            Nation_options_str  += '<option value="Duchy of Meltisar">Duchy of Meltisar</option>';
            Nation_options_str  += '<option value="Free Planets Alliance">Free Planets Alliance</option>';
            Nation_options_str  += '<option value="Ghost Sector">Ghost Sector</option>';
            Nation_options_str  += '<option value="Holy Ertan Republic">Holy Ertan Republic</option>';
            Nation_options_str  += '<option value="Solar Imperium">Solar Imperium</option>';
            Nation_options_str  += '<option value="Solarian Federation">Solarian Federation</option>';
            Nation_options_str  += '<option value="Starlight Revolution">Starlight Revolution</option>';
            Nation_options_str  += '<option value="The Western Frontier Systems">The Western Frontier Systems</option>';
            sel_Nation.innerHTML = Nation_options_str;
            div_Nation.appendChild(sel_Nation);

            // Create Book Volume Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_Book = document.createElement('div');
            div_Book.id = "div_Book";
            div_Book.className= "filterselect";
            document.getElementById("menu").appendChild(div_Book);
            sel_Book = document.createElement('select');
            sel_Book.multiple = true;
            sel_Book.size = 4;
            sel_Book.id = "sel_Book";

            var lab_Book = document.createElement('div');
            lab_Book.innerHTML = 'BOOK';
            lab_Book.className = 'filterlabel';
            div_Book.appendChild(lab_Book);

            var reset_Book = document.createElement('div');
            reset_Book.innerHTML = '<button>clear filter</button>';
            reset_Book.className = 'filterlabel';
            reset_Book.onclick = function() {
                var options = document.getElementById("sel_Book").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Book.appendChild(reset_Book);

            var Book_options_str = "";
            sel_Book.onchange = function(){filterFunc()};
            Book_options_str  += '<option value="A1">A1</option>';
            Book_options_str  += '<option value="A2">A2</option>';
            Book_options_str  += '<option value="A3">A3</option>';
            Book_options_str  += '<option value="A4">A4</option>';
            sel_Book.innerHTML = Book_options_str;
            div_Book.appendChild(sel_Book);

            // Create Character Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_Character = document.createElement('div');
            div_Character.id = "div_Character";
            div_Character.className= "filterselect";
            document.getElementById("menu").appendChild(div_Character);
            sel_Character = document.createElement('select');
            sel_Character.multiple = true;
            sel_Character.size = 5;
            sel_Character.id = "sel_Character";

            var lab_Character = document.createElement('div');
            lab_Character.innerHTML = 'CHARACTER';
            lab_Character.className = 'filterlabel';
            div_Character.appendChild(lab_Character);

            var reset_Character = document.createElement('div');
            reset_Character.innerHTML = '<button>clear filter</button>';
            reset_Character.className = 'filterlabel';
            reset_Character.onclick = function() {
                var options = document.getElementById("sel_Character").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Character.appendChild(reset_Character);

            var Character_options_str = "";
            sel_Character.onchange = function(){filterFunc()};
            Character_options_str  += '<option value="Abbey">Abbey</option>';
            Character_options_str  += '<option value="Alex">Alex</option>';
            Character_options_str  += '<option value="Elis">Elis</option>';
            Character_options_str  += '<option value="Thea">Thea</option>';
            Character_options_str  += '<option value="Tia">Tia</option>';
            sel_Character.innerHTML = Character_options_str;
            div_Character.appendChild(sel_Character);

            // Create System Star Presence Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));
            
            var div_Star_Presc = document.createElement('div');
            div_Star_Presc.id = "div_Star_Presc";
            div_Star_Presc.className= "filterselect";
            document.getElementById("menu").appendChild(div_Star_Presc);
            sel_Star_Presc = document.createElement('select');
            sel_Star_Presc.multiple = true;
            sel_Star_Presc.size = 2;
            sel_Star_Presc.id = "sel_Star_Presc";

            var lab_Star_Presc = document.createElement('div');
            lab_Star_Presc.innerHTML = 'STAR PRESENCE IN SYSTEM';
            lab_Star_Presc.className = 'filterlabel';
            div_Star_Presc.appendChild(lab_Star_Presc);

            var reset_Star_Presc = document.createElement('div');
            reset_Star_Presc.innerHTML = '<button>clear filter</button>';
            reset_Star_Presc.className = 'filterlabel';
            reset_Star_Presc.onclick = function() {
                var options = document.getElementById("sel_Star_Presc").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Star_Presc.appendChild(reset_Star_Presc);

            var Star_Presc_options_str = "";
            sel_Star_Presc.onchange = function(){filterFunc()};
            Star_Presc_options_str  += '<option value="1">YES</option>';
            Star_Presc_options_str  += '<option value="0">NO</option>';
            sel_Star_Presc.innerHTML = Star_Presc_options_str;
            div_Star_Presc.appendChild(sel_Star_Presc);
                
            // Create Unsurveyed Bodies Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_Unsurv_bod = document.createElement('div');
            div_Unsurv_bod.id = "div_Unsurv_bod";
            div_Unsurv_bod.className= "filterselect";
            document.getElementById("menu").appendChild(div_Unsurv_bod);
            sel_Unsurv_bod = document.createElement('select');
            sel_Unsurv_bod.multiple = true;
            sel_Unsurv_bod.size = 1;
            sel_Unsurv_bod.id = "sel_Unsurv_bod";

            var lab_Unsurv_bod = document.createElement('div');
            lab_Unsurv_bod.innerHTML = 'SYSTEMS WITH UNSURVEYED BODIES';
            lab_Unsurv_bod.className = 'filterlabel';
            div_Unsurv_bod.appendChild(lab_Unsurv_bod);

            var reset_Unsurv_bod = document.createElement('div');
            reset_Unsurv_bod.innerHTML = '<button>clear filter</button>';
            reset_Unsurv_bod.className = 'filterlabel';
            reset_Unsurv_bod.onclick = function() {
                var options = document.getElementById("sel_Unsurv_bod").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Unsurv_bod.appendChild(reset_Unsurv_bod);

            var Unsurv_bod_options_str = "";
            sel_Unsurv_bod.onchange = function(){filterFunc()};
            Unsurv_bod_options_str  += '<option value="1">SHOW</option>';
            sel_Unsurv_bod.innerHTML = Unsurv_bod_options_str;
            div_Unsurv_bod.appendChild(sel_Unsurv_bod);

            // Create New Lane Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_New_Lane = document.createElement('div');
            div_New_Lane.id = "div_New_Lane";
            div_New_Lane.className= "filterselect";
            document.getElementById("menu").appendChild(div_New_Lane);
            sel_New_Lane = document.createElement('select');
            sel_New_Lane.multiple = true;
            sel_New_Lane.size = 1;
            sel_New_Lane.id = "sel_New_Lane";

            var lab_New_Lane = document.createElement('div');
            lab_New_Lane.innerHTML = 'SYSTEMS WHERE A NEW STARLINE IS BEING RESEARCHED';
            lab_New_Lane.className = 'filterlabel';
            div_New_Lane.appendChild(lab_New_Lane);

            var reset_New_Lane = document.createElement('div');
            reset_New_Lane.innerHTML = '<button>clear filter</button>';
            reset_New_Lane.className = 'filterlabel';
            reset_New_Lane.onclick = function() {
                var options = document.getElementById("sel_New_Lane").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_New_Lane.appendChild(reset_New_Lane);

            var New_Lane_options_str = "";
            sel_New_Lane.onchange = function(){filterFunc()};
            New_Lane_options_str  += '<option value="1">SHOW</option>';
            sel_New_Lane.innerHTML = New_Lane_options_str;
            div_New_Lane.appendChild(sel_New_Lane);
            
            // Create Lane Type Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_Type = document.createElement('div');
            div_Type.id = "div_Type";
            div_Type.className= "filterselect";
            document.getElementById("menu").appendChild(div_Type);
            sel_Type = document.createElement('select');
            sel_Type.multiple = true;
            sel_Type.size = 2;
            sel_Type.id = "sel_Type";

            var lab_Type = document.createElement('div');
            lab_Type.innerHTML = 'STARLANE TYPE';
            lab_Type.className = 'filterlabel';
            div_Type.appendChild(lab_Type);

            var reset_Type = document.createElement('div');
            reset_Type.innerHTML = '<button>clear filter</button>';
            reset_Type.className = 'filterlabel';
            reset_Type.onclick = function() {
                var options = document.getElementById("sel_Type").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Type.appendChild(reset_Type);

            var Type_options_str = "";
            sel_Type.onchange = function(){filterFunc()};
            Type_options_str  += '<option value="International">INTERNATIONAL</option>';
            Type_options_str  += '<option value="National">NATIONAL</option>';
            sel_Type.innerHTML = Type_options_str;
            div_Type.appendChild(sel_Type);

            // Create Lane Status Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_Status = document.createElement('div');
            div_Status.id = "div_Status";
            div_Status.className= "filterselect";
            document.getElementById("menu").appendChild(div_Status);
            sel_Status = document.createElement('select');
            sel_Status.multiple = true;
            sel_Status.size = 2;
            sel_Status.id = "sel_Status";

            var lab_Status = document.createElement('div');
            lab_Status.innerHTML = 'STARLANE STATUS';
            lab_Status.className = 'filterlabel';
            div_Status.appendChild(lab_Status);

            var reset_Status = document.createElement('div');
            reset_Status.innerHTML = '<button>clear filter</button>';
            reset_Status.className = 'filterlabel';
            reset_Status.onclick = function() {
                var options = document.getElementById("sel_Status").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Status.appendChild(reset_Status);

            var Status_options_str = "";
            sel_Status.onchange = function(){filterFunc()};
            Status_options_str  += '<option value="In Developement">IN DEVELOPEMENT</option>';
            Status_options_str  += '<option value="Operational">OPERATIONAL</option>';
            sel_Status.innerHTML = Status_options_str;
            div_Status.appendChild(sel_Status);

            // Create Systems Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_System_Nam = document.createElement('div');
            div_System_Nam.id = "div_System_Nam";
            div_System_Nam.className= "filterselect";
            document.getElementById("menu").appendChild(div_System_Nam);
            sel_System_Nam = document.createElement('select');
            sel_System_Nam.multiple = true;
            sel_System_Nam.size = 5;
            sel_System_Nam.id = "sel_System_Nam";

            var lab_System_Nam = document.createElement('div');
            lab_System_Nam.innerHTML = 'SYSTEM NAME';
            lab_System_Nam.className = 'filterlabel';
            div_System_Nam.appendChild(lab_System_Nam);

            var reset_System_Nam = document.createElement('div');
            reset_System_Nam.innerHTML = '<button>clear filter</button>';
            reset_System_Nam.className = 'filterlabel';
            reset_System_Nam.onclick = function() {
                var options = document.getElementById("sel_System_Nam").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_System_Nam.appendChild(reset_System_Nam);

            var System_Nam_options_str = "";
            sel_System_Nam.onchange = function(){filterFunc()};
            System_Nam_options_str  += '<option value="1 Octantis">1 Octantis</option>';
            System_Nam_options_str  += '<option value="1 Pavonis">1 Pavonis</option>';
            System_Nam_options_str  += '<option value="10 Cassiopeiae">10 Cassiopeiae</option>';
            System_Nam_options_str  += '<option value="101 Leonis">101 Leonis</option>';
            System_Nam_options_str  += '<option value="102 Leonis">102 Leonis</option>';
            System_Nam_options_str  += '<option value="103 Leonis">103 Leonis</option>';
            System_Nam_options_str  += '<option value="104 Ceti">104 Ceti</option>';
            System_Nam_options_str  += '<option value="106 Draconis">106 Draconis</option>';
            System_Nam_options_str  += '<option value="107 Piscium">107 Piscium</option>';
            System_Nam_options_str  += '<option value="109 Aquarii">109 Aquarii</option>';
            System_Nam_options_str  += '<option value="110 Aquarii">110 Aquarii</option>';
            System_Nam_options_str  += '<option value="111 Ceti">111 Ceti</option>';
            System_Nam_options_str  += '<option value="111 Virginis">111 Virginis</option>';
            System_Nam_options_str  += '<option value="112 Virginis">112 Virginis</option>';
            System_Nam_options_str  += '<option value="113 Aquarii">113 Aquarii</option>';
            System_Nam_options_str  += '<option value="113 Virginis">113 Virginis</option>';
            System_Nam_options_str  += '<option value="114 Aquarii">114 Aquarii</option>';
            System_Nam_options_str  += '<option value="114 Ceti">114 Ceti</option>';
            System_Nam_options_str  += '<option value="114 Piscium">114 Piscium</option>';
            System_Nam_options_str  += '<option value="114 Virginis">114 Virginis</option>';
            System_Nam_options_str  += '<option value="115 Aquarii">115 Aquarii</option>';
            System_Nam_options_str  += '<option value="115 Herculis">115 Herculis</option>';
            System_Nam_options_str  += '<option value="115 Piscium">115 Piscium</option>';
            System_Nam_options_str  += '<option value="115 Virginis">115 Virginis</option>';
            System_Nam_options_str  += '<option value="116 Ceti">116 Ceti</option>';
            System_Nam_options_str  += '<option value="116 Herculis">116 Herculis</option>';
            System_Nam_options_str  += '<option value="116 Piscium">116 Piscium</option>';
            System_Nam_options_str  += '<option value="116 Ursae Majoris">116 Ursae Majoris</option>';
            System_Nam_options_str  += '<option value="116 Virginis">116 Virginis</option>';
            System_Nam_options_str  += '<option value="117 Virginis">117 Virginis</option>';
            System_Nam_options_str  += '<option value="118 Piscium">118 Piscium</option>';
            System_Nam_options_str  += '<option value="118 Virginis">118 Virginis</option>';
            System_Nam_options_str  += '<option value="119 Herculis">119 Herculis</option>';
            System_Nam_options_str  += '<option value="119 Piscium">119 Piscium</option>';
            System_Nam_options_str  += '<option value="119 Virginis">119 Virginis</option>';
            System_Nam_options_str  += '<option value="120 Herculis">120 Herculis</option>';
            System_Nam_options_str  += '<option value="120 Piscium">120 Piscium</option>';
            System_Nam_options_str  += '<option value="120 Virginis">120 Virginis</option>';
            System_Nam_options_str  += '<option value="121 Aquarii">121 Aquarii</option>';
            System_Nam_options_str  += '<option value="121 Piscium">121 Piscium</option>';
            System_Nam_options_str  += '<option value="121 Virginis">121 Virginis</option>';
            System_Nam_options_str  += '<option value="122 Piscium">122 Piscium</option>';
            System_Nam_options_str  += '<option value="123 Piscium">123 Piscium</option>';
            System_Nam_options_str  += '<option value="124 Herculis">124 Herculis</option>';
            System_Nam_options_str  += '<option value="124 Virginis">124 Virginis</option>';
            System_Nam_options_str  += '<option value="125 Piscium">125 Piscium</option>';
            System_Nam_options_str  += '<option value="125 Virginis">125 Virginis</option>';
            System_Nam_options_str  += '<option value="126 Piscium">126 Piscium</option>';
            System_Nam_options_str  += '<option value="126 Virginis">126 Virginis</option>';
            System_Nam_options_str  += '<option value="13 Centauri">13 Centauri</option>';
            System_Nam_options_str  += '<option value="131 Virginis">131 Virginis</option>';
            System_Nam_options_str  += '<option value="132 Virginis">132 Virginis</option>';
            System_Nam_options_str  += '<option value="135 Virginis">135 Virginis</option>';
            System_Nam_options_str  += '<option value="14 Centauri">14 Centauri</option>';
            System_Nam_options_str  += '<option value="142 Tauri">142 Tauri</option>';
            System_Nam_options_str  += '<option value="144 Tauri">144 Tauri</option>';
            System_Nam_options_str  += '<option value="15 Cassiopeiae">15 Cassiopeiae</option>';
            System_Nam_options_str  += '<option value="16 Cassiopeiae">16 Cassiopeiae</option>';
            System_Nam_options_str  += '<option value="2 Octantis">2 Octantis</option>';
            System_Nam_options_str  += '<option value="25 Ursae Minoris">25 Ursae Minoris</option>';
            System_Nam_options_str  += '<option value="36 Cephei">36 Cephei</option>';
            System_Nam_options_str  += '<option value="52 Capricorni">52 Capricorni</option>';
            System_Nam_options_str  += '<option value="56 Cassiopeiae">56 Cassiopeiae</option>';
            System_Nam_options_str  += '<option value="57 Cassiopeiae">57 Cassiopeiae</option>';
            System_Nam_options_str  += '<option value="6 Centauri">6 Centauri</option>';
            System_Nam_options_str  += '<option value="6 Lupi">6 Lupi</option>';
            System_Nam_options_str  += '<option value="61 Hydrae">61 Hydrae</option>';
            System_Nam_options_str  += '<option value="61 Virginis">61 Virginis</option>';
            System_Nam_options_str  += '<option value="63 Hydrae">63 Hydrae</option>';
            System_Nam_options_str  += '<option value="64 Hydrae">64 Hydrae</option>';
            System_Nam_options_str  += '<option value="69 Andromedae">69 Andromedae</option>';
            System_Nam_options_str  += '<option value="7 Centauri">7 Centauri</option>';
            System_Nam_options_str  += '<option value="7 Octantis">7 Octantis</option>';
            System_Nam_options_str  += '<option value="70 Andromedae">70 Andromedae</option>';
            System_Nam_options_str  += '<option value="70 Hydrae">70 Hydrae</option>';
            System_Nam_options_str  += '<option value="73 Eridani">73 Eridani</option>';
            System_Nam_options_str  += '<option value="75 Ophiuchi">75 Ophiuchi</option>';
            System_Nam_options_str  += '<option value="76 Ophiuchi">76 Ophiuchi</option>';
            System_Nam_options_str  += '<option value="78 Ophiuchi">78 Ophiuchi</option>';
            System_Nam_options_str  += '<option value="80 Ophiuchi">80 Ophiuchi</option>';
            System_Nam_options_str  += '<option value="81 Draconis">81 Draconis</option>';
            System_Nam_options_str  += '<option value="81 Orionis">81 Orionis</option>';
            System_Nam_options_str  += '<option value="82 Eridani">82 Eridani</option>';
            System_Nam_options_str  += '<option value="83 Draconis">83 Draconis</option>';
            System_Nam_options_str  += '<option value="84 Cancri">84 Cancri</option>';
            System_Nam_options_str  += '<option value="84 Orionis">84 Orionis</option>';
            System_Nam_options_str  += '<option value="85 Ophiuchi">85 Ophiuchi</option>';
            System_Nam_options_str  += '<option value="85 Orionis">85 Orionis</option>';
            System_Nam_options_str  += '<option value="86 Draconis">86 Draconis</option>';
            System_Nam_options_str  += '<option value="86 Geminorum">86 Geminorum</option>';
            System_Nam_options_str  += '<option value="87 Draconis">87 Draconis</option>';
            System_Nam_options_str  += '<option value="88 Draconis">88 Draconis</option>';
            System_Nam_options_str  += '<option value="88 Ophiuchi">88 Ophiuchi</option>';
            System_Nam_options_str  += '<option value="89 Ursae Majoris">89 Ursae Majoris</option>';
            System_Nam_options_str  += '<option value="9 Centauri">9 Centauri</option>';
            System_Nam_options_str  += '<option value="90 Pegasi">90 Pegasi</option>';
            System_Nam_options_str  += '<option value="90 Ursae Majoris">90 Ursae Majoris</option>';
            System_Nam_options_str  += '<option value="91 Draconis">91 Draconis</option>';
            System_Nam_options_str  += '<option value="91 Orionis">91 Orionis</option>';
            System_Nam_options_str  += '<option value="92 Pegasi">92 Pegasi</option>';
            System_Nam_options_str  += '<option value="94 Ursae Majoris">94 Ursae Majoris</option>';
            System_Nam_options_str  += '<option value="96 Draconis">96 Draconis</option>';
            System_Nam_options_str  += '<option value="97 Draconis">97 Draconis</option>';
            System_Nam_options_str  += '<option value="97 Pegasi">97 Pegasi</option>';
            System_Nam_options_str  += '<option value="97 Ursae Majoris">97 Ursae Majoris</option>';
            System_Nam_options_str  += '<option value="98 Ceti">98 Ceti</option>';
            System_Nam_options_str  += '<option value="98 Pegasi">98 Pegasi</option>';
            System_Nam_options_str  += '<option value="99 Ceti">99 Ceti</option>';
            System_Nam_options_str  += '<option value="99 Leonis">99 Leonis</option>';
            System_Nam_options_str  += '<option value="99 Ursae Majoris">99 Ursae Majoris</option>';
            System_Nam_options_str  += '<option value="AD Leonis">AD Leonis</option>';
            System_Nam_options_str  += '<option value="AU Microscopii">AU Microscopii</option>';
            System_Nam_options_str  += '<option value="AX Microscopii">AX Microscopii</option>';
            System_Nam_options_str  += '<option value="Alpha Centauri">Alpha Centauri</option>';
            System_Nam_options_str  += '<option value="Alpha Leonis Minoris">Alpha Leonis Minoris</option>';
            System_Nam_options_str  += '<option value="Alpha Normae">Alpha Normae</option>';
            System_Nam_options_str  += '<option value="Alpha Velorum">Alpha Velorum</option>';
            System_Nam_options_str  += '<option value="Altair">Altair</option>';
            System_Nam_options_str  += '<option value="Barnard&apos;s Star">Barnard&apos;s Star</option>';
            System_Nam_options_str  += '<option value="Beta Antliae">Beta Antliae</option>';
            System_Nam_options_str  += '<option value="Beta Hydri">Beta Hydri</option>';
            System_Nam_options_str  += '<option value="Beta Puppis">Beta Puppis</option>';
            System_Nam_options_str  += '<option value="Beta Telescopii">Beta Telescopii</option>';
            System_Nam_options_str  += '<option value="Beta Virginis">Beta Virginis</option>';
            System_Nam_options_str  += '<option value="CD Ceti">CD Ceti</option>';
            System_Nam_options_str  += '<option value="Chi Arietis">Chi Arietis</option>';
            System_Nam_options_str  += '<option value="Chi Cephei">Chi Cephei</option>';
            System_Nam_options_str  += '<option value="Chi Draconis">Chi Draconis</option>';
            System_Nam_options_str  += '<option value="Chi Librae">Chi Librae</option>';
            System_Nam_options_str  += '<option value="DX Cancri">DX Cancri</option>';
            System_Nam_options_str  += '<option value="Delta Camelopardalis">Delta Camelopardalis</option>';
            System_Nam_options_str  += '<option value="Delta Capricorni">Delta Capricorni</option>';
            System_Nam_options_str  += '<option value="Delta Carinae">Delta Carinae</option>';
            System_Nam_options_str  += '<option value="Delta Pavonis">Delta Pavonis</option>';
            System_Nam_options_str  += '<option value="Delta Pegasi">Delta Pegasi</option>';
            System_Nam_options_str  += '<option value="Donner 91">Donner 91</option>';
            System_Nam_options_str  += '<option value="EV Lacertae">EV Lacertae</option>';
            System_Nam_options_str  += '<option value="EZ Aquarii">EZ Aquarii</option>';
            System_Nam_options_str  += '<option value="Epsilon Eridani">Epsilon Eridani</option>';
            System_Nam_options_str  += '<option value="Epsilon Horologii">Epsilon Horologii</option>';
            System_Nam_options_str  += '<option value="Epsilon Indi">Epsilon Indi</option>';
            System_Nam_options_str  += '<option value="Eta Botis">Eta Botis</option>';
            System_Nam_options_str  += '<option value="Eta Cassiopeiae">Eta Cassiopeiae</option>';
            System_Nam_options_str  += '<option value="Eta Monocerotis">Eta Monocerotis</option>';
            System_Nam_options_str  += '<option value="Eta Sextantis">Eta Sextantis</option>';
            System_Nam_options_str  += '<option value="FL Virginis">FL Virginis</option>';
            System_Nam_options_str  += '<option value="FN Virginis">FN Virginis</option>';
            System_Nam_options_str  += '<option value="GL Virginis">GL Virginis</option>';
            System_Nam_options_str  += '<option value="Gamma Carinae">Gamma Carinae</option>';
            System_Nam_options_str  += '<option value="Gamma Leporis">Gamma Leporis</option>';
            System_Nam_options_str  += '<option value="Gamma Telescopii">Gamma Telescopii</option>';
            System_Nam_options_str  += '<option value="Gamma Virginis">Gamma Virginis</option>';
            System_Nam_options_str  += '<option value="Gliese 290">Gliese 290</option>';
            System_Nam_options_str  += '<option value="Groombridge 34">Groombridge 34</option>';
            System_Nam_options_str  += '<option value="HD 222834">HD 222834</option>';
            System_Nam_options_str  += '<option value="HH Andromedae">HH Andromedae</option>';
            System_Nam_options_str  += '<option value="Heintz 299">Heintz 299</option>';
            System_Nam_options_str  += '<option value="Iota Comae Berenices">Iota Comae Berenices</option>';
            System_Nam_options_str  += '<option value="Kappa Camelopardalis">Kappa Camelopardalis</option>';
            System_Nam_options_str  += '<option value="Kappa Muscae">Kappa Muscae</option>';
            System_Nam_options_str  += '<option value="Kapteyn&apos;s Star">Kapteyn&apos;s Star</option>';
            System_Nam_options_str  += '<option value="Kruger 60">Kruger 60</option>';
            System_Nam_options_str  += '<option value="Lacaille 9352">Lacaille 9352</option>';
            System_Nam_options_str  += '<option value="Lalande">Lalande</option>';
            System_Nam_options_str  += '<option value="Lambda Indi">Lambda Indi</option>';
            System_Nam_options_str  += '<option value="Lambda Volantis">Lambda Volantis</option>';
            System_Nam_options_str  += '<option value="Luhman 16">Luhman 16</option>';
            System_Nam_options_str  += '<option value="Mu Camelopardalis">Mu Camelopardalis</option>';
            System_Nam_options_str  += '<option value="Mu Delphini">Mu Delphini</option>';
            System_Nam_options_str  += '<option value="Mu Pyxidis">Mu Pyxidis</option>';
            System_Nam_options_str  += '<option value="Mu Reticuli">Mu Reticuli</option>';
            System_Nam_options_str  += '<option value="Mu Tucanae">Mu Tucanae</option>';
            System_Nam_options_str  += '<option value="Mu Ursae Minoris">Mu Ursae Minoris</option>';
            System_Nam_options_str  += '<option value="Nu Crateris">Nu Crateris</option>';
            System_Nam_options_str  += '<option value="Nu Muscae">Nu Muscae</option>';
            System_Nam_options_str  += '<option value="Nu Reticuli">Nu Reticuli</option>';
            System_Nam_options_str  += '<option value="Nu Ursae Minoris">Nu Ursae Minoris</option>';
            System_Nam_options_str  += '<option value="Omega Arietis">Omega Arietis</option>';
            System_Nam_options_str  += '<option value="Omega Ceti">Omega Ceti</option>';
            System_Nam_options_str  += '<option value="Omega Gruis">Omega Gruis</option>';
            System_Nam_options_str  += '<option value="Omega Sculptoris">Omega Sculptoris</option>';
            System_Nam_options_str  += '<option value="Omicron Chamaeleontis">Omicron Chamaeleontis</option>';
            System_Nam_options_str  += '<option value="Omicron Hydri">Omicron Hydri</option>';
            System_Nam_options_str  += '<option value="Omicron Lyrae">Omicron Lyrae</option>';
            System_Nam_options_str  += '<option value="Omikron Mensae">Omikron Mensae</option>';
            System_Nam_options_str  += '<option value="P Eridani">P Eridani</option>';
            System_Nam_options_str  += '<option value="Phi Arietis">Phi Arietis</option>';
            System_Nam_options_str  += '<option value="Phi Librae">Phi Librae</option>';
            System_Nam_options_str  += '<option value="Pi Leporis">Pi Leporis</option>';
            System_Nam_options_str  += '<option value="Pi Librae">Pi Librae</option>';
            System_Nam_options_str  += '<option value="Pi Pyxidis">Pi Pyxidis</option>';
            System_Nam_options_str  += '<option value="Pi-3 Orionis">Pi-3 Orionis</option>';
            System_Nam_options_str  += '<option value="Pollux">Pollux</option>';
            System_Nam_options_str  += '<option value="Proxima Centauri">Proxima Centauri</option>';
            System_Nam_options_str  += '<option value="Psi Arietis">Psi Arietis</option>';
            System_Nam_options_str  += '<option value="Psi Cephei">Psi Cephei</option>';
            System_Nam_options_str  += '<option value="Psi Ceti">Psi Ceti</option>';
            System_Nam_options_str  += '<option value="Psi Gruis">Psi Gruis</option>';
            System_Nam_options_str  += '<option value="Psi Herculis">Psi Herculis</option>';
            System_Nam_options_str  += '<option value="QY Aurigae">QY Aurigae</option>';
            System_Nam_options_str  += '<option value="Rho Canis Majoris">Rho Canis Majoris</option>';
            System_Nam_options_str  += '<option value="Rho Librae">Rho Librae</option>';
            System_Nam_options_str  += '<option value="Ross 128">Ross 128</option>';
            System_Nam_options_str  += '<option value="SOL">SOL</option>';
            System_Nam_options_str  += '<option value="SZ Crateris">SZ Crateris</option>';
            System_Nam_options_str  += '<option value="SZ Ursae Majoris">SZ Ursae Majoris</option>';
            System_Nam_options_str  += '<option value="Sanford 128">Sanford 128</option>';
            System_Nam_options_str  += '<option value="Scholz&apos;s Star">Scholz&apos;s Star</option>';
            System_Nam_options_str  += '<option value="Sigma Cephei">Sigma Cephei</option>';
            System_Nam_options_str  += '<option value="Sigma Tucanae">Sigma Tucanae</option>';
            System_Nam_options_str  += '<option value="Sirius">Sirius</option>';
            System_Nam_options_str  += '<option value="Struve 2398">Struve 2398</option>';
            System_Nam_options_str  += '<option value="TW Piscis Austrini">TW Piscis Austrini</option>';
            System_Nam_options_str  += '<option value="TZ Arietis">TZ Arietis</option>';
            System_Nam_options_str  += '<option value="Tau Tucanae">Tau Tucanae</option>';
            System_Nam_options_str  += '<option value="Theta Corvi">Theta Corvi</option>';
            System_Nam_options_str  += '<option value="Theta Horologii">Theta Horologii</option>';
            System_Nam_options_str  += '<option value="Unknown Yellow Dwarf">Unknown Yellow Dwarf</option>';
            System_Nam_options_str  += '<option value="Upsilon Cephei">Upsilon Cephei</option>';
            System_Nam_options_str  += '<option value="V1216 Sagittarii">V1216 Sagittarii</option>';
            System_Nam_options_str  += '<option value="V547 Cassiopeiae">V547 Cassiopeiae</option>';
            System_Nam_options_str  += '<option value="Van Biesbroeck&apos;s Star">Van Biesbroeck&apos;s Star</option>';
            System_Nam_options_str  += '<option value="Van Maanens Star">Van Maanens Star</option>';
            System_Nam_options_str  += '<option value="Vyssotsky McCormic 541">Vyssotsky McCormic 541</option>';
            System_Nam_options_str  += '<option value="Woolley 9833">Woolley 9833</option>';
            System_Nam_options_str  += '<option value="Xi Botis">Xi Botis</option>';
            System_Nam_options_str  += '<option value="Xi Chamaeleontis">Xi Chamaeleontis</option>';
            System_Nam_options_str  += '<option value="Xi Fornacis">Xi Fornacis</option>';
            System_Nam_options_str  += '<option value="Xi Leporis">Xi Leporis</option>';
            System_Nam_options_str  += '<option value="Xi Muscae">Xi Muscae</option>';
            System_Nam_options_str  += '<option value="YZ Ceti">YZ Ceti</option>';
            System_Nam_options_str  += '<option value="Zeta Carinae">Zeta Carinae</option>';
            System_Nam_options_str  += '<option value="Zeta Herculis">Zeta Herculis</option>';
            System_Nam_options_str  += '<option value="Zeta Sextantis">Zeta Sextantis</option>';
            System_Nam_options_str  += '<option value="Zeta-1 Reticuli">Zeta-1 Reticuli</option>';
            System_Nam_options_str  += '<option value="kappa Ursae Minoris">kappa Ursae Minoris</option>';
            sel_System_Nam.innerHTML = System_Nam_options_str;
            div_System_Nam.appendChild(sel_System_Nam);

            // Create Economic Sector Select Filter
            /*
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_Sector = document.createElement('div');
            div_Sector.id = "div_Sector";
            div_Sector.className= "filterselect";
            document.getElementById("menu").appendChild(div_Sector);
            sel_Sector = document.createElement('select');
            sel_Sector.multiple = true;
            sel_Sector.size = 5;
            sel_Sector.id = "sel_Sector";

            var lab_Sector = document.createElement('div');
            lab_Sector.innerHTML = 'ECONOMIC SECTOR';
            lab_Sector.className = 'filterlabel';
            div_Sector.appendChild(lab_Sector);

            var reset_Sector = document.createElement('div');
            reset_Sector.innerHTML = '<button>clear filter</button>';
            reset_Sector.className = 'filterlabel';
            reset_Sector.onclick = function() {
                var options = document.getElementById("sel_Sector").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Sector.appendChild(reset_Sector);

            var Sector_options_str = "";
            sel_Sector.onchange = function(){filterFunc()};
            Sector_options_str  += '<option value="Agrarian Sector">Agrarian Sector</option>';
            Sector_options_str  += '<option value="Consumer Sector">Consumer Sector</option>';
            Sector_options_str  += '<option value="Autarkic Sector">Autarkic Sector</option>';
            Sector_options_str  += '<option value="Free Planets Alliance">Free Planets Alliance</option>';
            Sector_options_str  += '<option value="Frontier Sector">Frontier Sector</option>';
            Sector_options_str  += '<option value="Industrial Sector">Industrial Sector</option>';
            Sector_options_str  += '<option value="Research Sector">Research Sector</option>';
            Sector_options_str  += '<option value="Trade Sector">Trade Sector</option>';
            sel_Sector.innerHTML = Sector_options_str;
            div_Sector.appendChild(sel_Sector);
            */

            // ?
            resetLabels([layer_Regions_0,layer_Systems_2]);
            map.on("zoomend", function(){
                resetLabels([layer_Regions_0,layer_Systems_2]);
            });
            map.on("layeradd", function(){
                resetLabels([layer_Regions_0,layer_Systems_2]);
            });
            map.on("layerremove", function(){
                resetLabels([layer_Regions_0,layer_Systems_2]);
            });

            // Center map
            map.setView([0.3, 0.6], 10.5);

            sel_Character.selectedIndex = 1; // Set default character journey to MC
            sel_Character.dispatchEvent(new Event('change')); 

            sel_Book.selectedIndex = 0; // Limit the default character journey scope to first book
            sel_Book.dispatchEvent(new Event('change'));

            reset_Nation.onclick(); // Clear the filter for regions (makes diplomacy layer not messy on load for some resson?)

            map.removeLayer(layer_Characters_4); // Hide the character journey layer after setting default displays for character and book
            map.removeLayer(layer_Diplomacy_6); // Hide the diplomacy layer
        </script>
    </body>
</html>
