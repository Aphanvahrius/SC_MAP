<!doctype html>
<!--MAIN-->
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="stylesheet" href="css/specialElements.css">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/leaflet-search.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/filter.css">
        <link rel="stylesheet" href="css/nouislider.min.css">
        <link rel="stylesheet" href="css/leaflet-measure.css">

        <style>
            html, body, #map {
                width: 100%;
                height: 100%;
                padding: 0;
                margin: 0;
            }
            .spoiler {
                color: #800000;
                background-color: #aaaaba;
                padding: 2px 5px;
                cursor: pointer;
                font-weight: 900;
            }
            .spoiler:hover {
                text-decoration: underline;
            }
            .crossed {
                text-decoration: line-through;
            }
        </style>
        <title>ShipCore Interactive Map</title>
    </head>

    <body style="background-image: linear-gradient(to right, #0f0c29, #302b63, #24243e); color: #eeeefe; text-shadow: 0.2px 0.1px 1px rgba(80, 80, 80, 0.8); overflow: hidden;">
        <div id="map"></div>

        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/multi-style-layer.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet-measure.js"></script>
        <script src="js/leaflet-search.js"></script>
        <script src="js/tailDT.js"></script>
        <script src="js/nouislider.min.js"></script>
        <script src="js/wNumb.js"></script>
        <script src="data/Regions_0.js"></script>
        <script src="data/Lanes_1.js"></script>
        <script src="data/Systems_2.js"></script>
        <script src="data/Sectors_3.js"></script>
        <script src="data/Characters_4.js"></script>
        <script src="data/Routes_5.js"></script>
        <script src="data/Diplomacy_6.js"></script>

        <svg width="0" height="0" style="position:absolute;"><defs></defs></svg>

        <script>
            var highlightLayer;
            function highlightFeature(e) {
                highlightLayer = e.target;
                highlightLayer.openPopup();
            }      

            var map = L.map('map', {zoomControl:true, zoomSnap:0.5, zoomDelta:0.5, maxZoom:15, minZoom:10.5, zoom:11});

            var hash = new L.Hash(map);

            var popup = L.popup();
            function onMapClick(e) {
                popup
                .setLatLng(e.latlng)
                .setContent("Coordinates: " + e.latlng.toString())
                .openOn(map);
            }
            map.on('click', onMapClick);

            map.attributionControl.setPrefix('\
                <a href="https://github.com/tomchadwin/qgis2web" target="_blank" rel="noopener noreferrer">qgis2web</a> &middot;\
                <a href="https://leafletjs.com" title="A JS library for interactive maps" target="_blank" rel="noopener noreferrer">Leaflet</a> &middot;\
                <a href="https://qgis.org" target="_blank" rel="noopener noreferrer">QGIS</a> &middot;\
                <a href="https://www.royalroad.com/fiction/41463/shipcore" target="_blank" rel="noopener noreferrer">ShipCore</a>'
            );

            var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});

            function removeEmptyRowsFromPopupContent(content, feature) {
                var tempDiv = document.createElement('div');
                tempDiv.innerHTML = content;
                var rows = tempDiv.querySelectorAll('tr');
                for (var i = 0; i < rows.length; i++) {
                    var td = rows[i].querySelector('td.visible-with-data');
                    var key = td ? td.id : '';
                    if (td && td.classList.contains('visible-with-data') && feature.properties[key] == null) {
                        rows[i].parentNode.removeChild(rows[i]);
                    }
                }
                return tempDiv.innerHTML;
            }

            var measureControl = new L.Control.Measure({
                position: 'topleft',
                primaryLengthUnit: 'meters',
                secondaryLengthUnit: 'kilometers',
                primaryAreaUnit: 'sqmeters',
                secondaryAreaUnit: 'hectares'
            });
            measureControl.addTo(map);
            document.getElementsByClassName('leaflet-control-measure-toggle')[0].innerHTML = '';
            document.getElementsByClassName('leaflet-control-measure-toggle')[0].className += ' fas fa-ruler';

            var bounds_group = new L.featureGroup([]);

            function setBounds() {
                if (bounds_group.getLayers().length) {
                    map.fitBounds(bounds_group.getBounds());
                }
                map.setMaxBounds([[-0.6,-1],[1.4,2]]); // D L U R
            }

            function revealSpoiler() {
                var spoiler = document.getElementById('spoiler');
                spoiler.style.display = 'none';
                
                var ruler = document.getElementById('Ruler');
                ruler.innerHTML = ruler.getAttribute('data-original-content');
            }

            function pop_Regions_0(feature, layer) {
                var rulerText = feature.properties['Ruler'] !== null ? autolinker.link(feature.properties['Ruler'].toLocaleString()) : '';
                var spoilerTextList = ["Celestia Astraea Psi", "The Pirate King", "The Council", "God of the Drakar"]; // List of spoilered info
                
                var popupContent = '<table>\
                    <tr>\
                        <th scope="row">Region</th>\
                        <td class="visible-with-data" id="Region">' + (feature.properties['Nation'] !== null ? autolinker.link(feature.properties['Nation'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Ruler</th>\
                        <td class="visible-with-data" id="Ruler" data-original-content="' + rulerText + '">' +
                            (rulerText === spoilerTextList[0] ? 
                                'Fleet Admiral Wilkes <span id="spoiler" class="spoiler" onclick="revealSpoiler()">SPOILER</span>' :
                                (spoilerTextList.includes(rulerText) ? '<span id="spoiler" class="spoiler" onclick="revealSpoiler()">SPOILER</span>' : rulerText))
                        + '</td>\
                    </tr>\
                </table>';
                
                layer.bindPopup(popupContent, {maxHeight: 400});
            }

            // Corporate Systems Fill
            function gradientStyleCS() {
                var radialGradient = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient");
                radialGradient.setAttribute("id", "gradientCS");
                radialGradient.setAttribute("cx", "50%");
                radialGradient.setAttribute("cy", "50%");
                radialGradient.setAttribute("r", "60%");
                radialGradient.innerHTML =  '<stop offset="0%" stop-color="#ffff00"/>' +
                                            '<stop offset="40%" stop-color="#fff20e"/>' +
                                            '<stop offset="70%" stop-color="#fee616"/>' +
                                            '<stop offset="100%" stop-color="#f9ce1f"/>';
                return radialGradient;
            }

            // Holy Ertan Republic Fill
            function gradientStyleHER() {
                var radialGradient = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient");
                radialGradient.setAttribute("id", "gradientHER");
                radialGradient.setAttribute("cx", "50%");
                radialGradient.setAttribute("cy", "50%");
                radialGradient.setAttribute("r", "60%");
                radialGradient.innerHTML =  '<stop offset="0%" stop-color="#00b339"/>' +
                                            '<stop offset="40%" stop-color="#0ba740"/>' +
                                            '<stop offset="70%" stop-color="#119b43"/>' +
                                            '<stop offset="100%" stop-color="#168343"/>';
                return radialGradient;
            }

            // Solarian Federation Fill
            function gradientStyleSF() {
                var radialGradient = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient");
                radialGradient.setAttribute("id", "gradientSF");
                radialGradient.setAttribute("cx", "50%");
                radialGradient.setAttribute("cy", "50%");
                radialGradient.setAttribute("r", "40%");
                radialGradient.innerHTML =  '<stop offset="0%" stop-color="#a600ff"/>' +
                                            '<stop offset="40%" stop-color="#a601ef"/>' +
                                            '<stop offset="70%" stop-color="#a502e1"/>' +
                                            '<stop offset="100%" stop-color="#a104c8"/>';
                return radialGradient;
            }

            // Solar Imperium Fill
            function gradientStyleSI() {
                var radialGradient = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient");
                radialGradient.setAttribute("id", "gradientSI");
                radialGradient.setAttribute("cx", "50%");
                radialGradient.setAttribute("cy", "50%");
                radialGradient.setAttribute("r", "60%");
                radialGradient.innerHTML =  '<stop offset="0%" stop-color="#ff0000"/>' +
                                            '<stop offset="40%" stop-color="#f10202"/>' +
                                            '<stop offset="70%" stop-color="#e30303"/>' +
                                            '<stop offset="100%" stop-color="#c80404"/>';
                return radialGradient;
            }

            // Duchy of Meltisar Fill
            function gradientStyleDoM() {
                var radialGradient = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient");
                radialGradient.setAttribute("id", "gradientDoM");
                radialGradient.setAttribute("cx", "50%");
                radialGradient.setAttribute("cy", "50%");
                radialGradient.setAttribute("r", "60%");
                radialGradient.innerHTML =  '<stop offset="0%" stop-color="#005eff"/>' +
                                            '<stop offset="40%" stop-color="#0253fb"/>' +
                                            '<stop offset="70%" stop-color="#0348f8"/>' +
                                            '<stop offset="100%" stop-color="#0627f9"/>';
                return radialGradient;
            }

            // Duchy of Drakar Fill
            function gradientStyleDoD() {
                var radialGradient = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient");
                radialGradient.setAttribute("id", "gradientDoD");
                radialGradient.setAttribute("cx", "50%");
                radialGradient.setAttribute("cy", "50%");
                radialGradient.setAttribute("r", "60%");
                radialGradient.innerHTML =  '<stop offset="0%" stop-color="#aa0000"/>' +
                                            '<stop offset="40%" stop-color="#910202"/>' +
                                            '<stop offset="70%" stop-color="#730303"/>' +
                                            '<stop offset="100%" stop-color="#540404"/>';
                return radialGradient;
            }

            // Free Planets Alliance Fill
            function gradientStyleFPA() {
                var radialGradient = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient");
                radialGradient.setAttribute("id", "gradientFPA");
                radialGradient.setAttribute("cx", "50%");
                radialGradient.setAttribute("cy", "50%");
                radialGradient.setAttribute("r", "60%");
                radialGradient.innerHTML =  '<stop offset="0%" stop-color="#7bf906"/>' +
                                            '<stop offset="40%" stop-color="#81ec06"/>' +
                                            '<stop offset="70%" stop-color="#85df06"/>' +
                                            '<stop offset="100%" stop-color="#86c705"/>';
                return radialGradient;
            }

            // Western Frontier Fill
            function gradientStyleWFS() {
                var radialGradient = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient");
                radialGradient.setAttribute("id", "gradientWFS");
                radialGradient.setAttribute("cx", "50%");
                radialGradient.setAttribute("cy", "50%");
                radialGradient.setAttribute("r", "60%");
                radialGradient.innerHTML =  '<stop offset="0%" stop-color="#737d8c"/>' +
                                            '<stop offset="40%" stop-color="#6c7485"/>' +
                                            '<stop offset="70%" stop-color="#666c7e"/>' +
                                            '<stop offset="100%" stop-color="#5a5a72"/>';
                return radialGradient;
            }

            // Ghost Sector Fill
            function gradientStyleGS() {
                var radialGradient = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient");
                radialGradient.setAttribute("id", "gradientGS");
                radialGradient.setAttribute("cx", "50%");
                radialGradient.setAttribute("cy", "50%");
                radialGradient.setAttribute("r", "40%");
                radialGradient.innerHTML =  '<stop offset="0%" stop-color="#A0A0A0"/>' +
                                            '<stop offset="40%" stop-color="#9B9B9B"/>' +
                                            '<stop offset="70%" stop-color="#959595"/>' +
                                            '<stop offset="100%" stop-color="#888888"/>';
                return radialGradient;
            }

            var gradientDefs = document.querySelector('svg defs');
            gradientDefs.appendChild(gradientStyleCS());
            gradientDefs.appendChild(gradientStyleHER());
            gradientDefs.appendChild(gradientStyleSF());
            gradientDefs.appendChild(gradientStyleSI());
            gradientDefs.appendChild(gradientStyleDoM());
            gradientDefs.appendChild(gradientStyleDoD());
            gradientDefs.appendChild(gradientStyleFPA());
            gradientDefs.appendChild(gradientStyleWFS());
            gradientDefs.appendChild(gradientStyleGS());

            function style_Regions_0_0(feature) {
                switch(String(feature.properties['Nation'])) {
                    case 'Corporate Systems':
                        return {
                            pane: 'pane_Regions_0',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0, 
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'url(#gradientCS)',
                            interactive: true,
                        }
                        break;
                    
                    case 'Holy Ertan Republic':
                        return {
                            pane: 'pane_Regions_0',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0, 
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'url(#gradientHER)',
                            interactive: true,
                        }
                        break;

                    case 'Solarian Federation':
                        return {
                            pane: 'pane_Regions_0',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0, 
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'url(#gradientSF)',
                            interactive: true,
                        }
                        break;
                    
                    case 'Solar Imperium':
                        return {
                            pane: 'pane_Regions_0',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0, 
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'url(#gradientSI)',
                            interactive: true,
                        }
                        break;

                    case 'Duchy of Meltisar':
                        return {
                            pane: 'pane_Regions_0',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0, 
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'url(#gradientDoM)',
                            interactive: true,
                        }
                        break;

                    case 'Duchy of Drakar':
                        return {
                            pane: 'pane_Regions_0',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0, 
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'url(#gradientDoD)',
                            interactive: true,
                        }
                        break;

                    case 'Free Planets Alliance':
                        return {
                            pane: 'pane_Regions_0',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0, 
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'url(#gradientFPA)',
                            interactive: true,
                        }
                        break;

                    case 'Ghost Sector':
                        return {
                            pane: 'pane_Regions_0',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0, 
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'url(#gradientGS)',
                            interactive: true,
                        }
                        break;

                    case 'The Western Frontier Systems':
                        return {
                            pane: 'pane_Regions_0',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0, 
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'url(#gradientWFS)',
                            interactive: true,
                        }
                        break;
                }
            }

            map.createPane('pane_Regions_0');
            map.getPane('pane_Regions_0').style.zIndex = 400;
            map.getPane('pane_Regions_0').style['mix-blend-mode'] = 'normal';

            var layer_Regions_0 = new L.geoJson(json_Regions_0, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Regions_0',
                layerName: 'layer_Regions_0',
                pane: 'pane_Regions_0',
                onEachFeature: pop_Regions_0,
                style: style_Regions_0_0,
            });

            bounds_group.addLayer(layer_Regions_0);
            map.addLayer(layer_Regions_0);

            function pop_Lanes_1(feature, layer) {
                var popupContent = '<table>\
                        <tr>\
                            <th scope="row">Region</th>\
                            <td class="visible-with-data" id="Nation">' + (feature.properties['Nation'] !== null ? autolinker.link(feature.properties['Nation'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Lane Status</th>\
                            <td class="visible-with-data" id="Status">' + (feature.properties['Status'] !== null ? autolinker.link(feature.properties['Status'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Lane Type</th>\
                            <td class="visible-with-data" id="Type">' + (feature.properties['Type'] !== null ? autolinker.link(feature.properties['Type'].toLocaleString()) : '') + '</td>\
                        </tr>\
                    </table>';
                layer.bindPopup(popupContent, {maxHeight: 400});
                var popup = layer.getPopup();
                var content = popup.getContent();
                var updatedContent = removeEmptyRowsFromPopupContent(content, feature);
                popup.setContent(updatedContent);
            }

            function style_Lanes_1_0(feature) {
                switch(String(feature.properties['Status'])) {
                    case 'In Developement':
                        return {
                            pane: 'pane_Lanes_1',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'square',
                            lineJoin: 'bevel',
                            weight: 3.0,
                            fillOpacity: 0,
                            interactive: true,
                        }
                        break;

                    case 'Operational':
                        return {
                            pane: 'pane_Lanes_1',
                            opacity: 1,
                            color: 'rgba(229,229,229,1.0)',
                            dashArray: '',
                            lineCap: 'square',
                            lineJoin: 'bevel',
                            weight: 3.0,
                            fillOpacity: 0,
                            interactive: true,
                        }
                        break;
                }
            }

            function style_Lanes_1_1(feature) {
                switch(String(feature.properties['Status'])) {
                    case 'In Developement':
                        return {
                            pane: 'pane_Lanes_1',
                            opacity: 1,
                            color: 'rgba(238,238,238,1.0)',
                            dashArray: '',
                            lineCap: 'square',
                            lineJoin: 'bevel',
                            weight: 2.0,
                            fillOpacity: 0,
                            interactive: true,
                        }
                        break;

                    case 'Operational':
                        return {
                            pane: 'pane_Lanes_1',
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'square',
                            lineJoin: 'bevel',
                            weight: 2.0,
                            fillOpacity: 0,
                            interactive: true,
                        }
                        break;
                }
            }

            map.createPane('pane_Lanes_1');
            map.getPane('pane_Lanes_1').style.zIndex = 410;
            map.getPane('pane_Lanes_1').style['mix-blend-mode'] = 'normal';

            var layer_Lanes_1 = new L.geoJson.multiStyle(json_Lanes_1, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Lanes_1',
                layerName: 'layer_Lanes_1',
                pane: 'pane_Lanes_1',
                onEachFeature: pop_Lanes_1,
                styles: [style_Lanes_1_0,style_Lanes_1_1,]
            });

            bounds_group.addLayer(layer_Lanes_1);
            map.addLayer(layer_Lanes_1);

            function pop_Systems_2(feature, layer) {
                var popupContent = '<table>\
                        <tr>\
                            <td id="Regular_Sys" colspan="2">' + ((feature.properties['Capital'] !== null || feature.properties['Core_Sys'] !== null || feature.properties['Idustr_Sys'] !== null || feature.properties['Mining_Sys'] !== null || feature.properties['Fuel_Depot'] !== null || feature.properties['Mt_Base'] !== null) ? '' : 'Regular System') + '</td>\
                        </tr>\
                        <tr>\
                            <td class="visible-with-data" id="Capital" colspan="2">' + (feature.properties['Capital'] !== null ? 'Capital System' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td class="visible-with-data" id="Core_Sys" colspan="2">' + (feature.properties['Core_Sys'] !== null ? 'Core System' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td class="visible-with-data" id="Idustr_Sys" colspan="2">' + (feature.properties['Idustr_Sys'] !== null ? 'Industrial System' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td class="visible-with-data" id="Mining_Sys" colspan="2">' + (feature.properties['Mining_Sys'] !== null ? 'Mining System' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td class="visible-with-data" id="Fuel_Depot" colspan="2">' + (feature.properties['Fuel_Depot'] !== null ? 'Fuel Depot' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td class="visible-with-data" id="Mt_Base" colspan="2">' + (feature.properties['Mt_Base'] !== null ? 'Maintenance Base' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td class="visible-with-data" id="Homeworld" colspan="2">' + (feature.properties['Homeworld'] !== null ? 'Homeworld of Humanity' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td class="visible-with-data" id="Unsurv_bod" colspan="2">' + (feature.properties['Unsurv_bod'] !== null ? 'Unsurveyed Bodies' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">System Name</th>\
                            <td class="visible-with-data" id="System_Nam">' + (feature.properties['System_Nam'] !== null ? autolinker.link(feature.properties['System_Nam'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Star Presence</th>\
                            <td class="visible-with-data" id="Star_Presc">' + (feature.properties['Star_Presc'] !== '0' ? 'Yes' : 'No') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Region</th>\
                            <td class="visible-with-data" id="Nation">' + (feature.properties['Nation'] !== null ? autolinker.link(feature.properties['Nation'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Inhabitable Worlds: </th>\
                            <td class="visible-with-data" id="Inhabitabl">' + (feature.properties['Inhabitabl'] !== null ? autolinker.link(feature.properties['Inhabitabl'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Orbital/Colony on</br>Unhabitable Bodies: </th>\
                            <td class="visible-with-data" id="Orbtl_Clny">' + (feature.properties['Orbtl_Clny'] !== null ? autolinker.link(feature.properties['Orbtl_Clny'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Minable Bodies/</br>Rogue Planets: </th>\
                            <td class="visible-with-data" id="Notbl_Minb">' + (feature.properties['Notbl_Minb'] !== null ? autolinker.link(feature.properties['Notbl_Minb'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Unexplored Jump</br>Lanes: </th>\
                            <td class="visible-with-data" id="Unexplored">' + (feature.properties['Unexplored'] !== null ? autolinker.link(feature.properties['Unexplored'].toLocaleString()) : '') + '</td>\
                        </tr>\
                    </table>';
                layer.bindPopup(popupContent, {maxHeight: 600});
                var popup = layer.getPopup();
                var content = popup.getContent();
                var updatedContent = removeEmptyRowsFromPopupContent(content, feature);
                popup.setContent(updatedContent);
            }

            function style_Systems_2_0(feature) {
                switch(String(feature.properties['Star_Presc'])) {
                    case '0':
                        return {
                            pane: 'pane_Systems_2',
                            radius: 8.0,
                            opacity: 1,
                            color: 'rgba(231,200,47,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0,
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'rgba(0,0,0,1.0)',
                            interactive: true,
                        }
                        break;

                    case '1':
                        return {
                            pane: 'pane_Systems_2',
                            radius: 8.0,
                            opacity: 1,
                            color: 'rgba(35,35,35,1.0)',
                            dashArray: '',
                            lineCap: 'butt',
                            lineJoin: 'miter',
                            weight: 2.0,
                            fill: true,
                            fillOpacity: 1,
                            fillColor: 'rgba(255,251,1,1.0)',
                            interactive: true,
                        }
                        break;
                }
            }

            map.createPane('pane_Systems_2');
            map.getPane('pane_Systems_2').style.zIndex = 420;
            map.getPane('pane_Systems_2').style['mix-blend-mode'] = 'normal';

            var layer_Systems_2 = new L.geoJson(json_Systems_2, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Systems_2',
                layerName: 'layer_Systems_2',
                pane: 'pane_Systems_2',
                onEachFeature: pop_Systems_2,
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.circleMarker(latlng, style_Systems_2_0(feature));
                },
            });

            bounds_group.addLayer(layer_Systems_2);
            map.addLayer(layer_Systems_2);

            function pop_Sectors_3(feature, layer) {
                var popupContent = '<table>\
                        <tr>\
                            <td class="visible-with-data" id="Sector" colspan="2">' + (feature.properties['Sector'] !== null ? autolinker.link(feature.properties['Sector'].toLocaleString()) : '') + '</td>\
                        </tr>\
                    </table>';
                layer.bindPopup(popupContent, {maxHeight: 400});
                var popup = layer.getPopup();
                var content = popup.getContent();
                var updatedContent = removeEmptyRowsFromPopupContent(content, feature);
                popup.setContent(updatedContent);
            }

            function style_Sectors_3_0(feature) {
                switch(String(feature.properties['Sector'])) {
                    case 'Agrarian Sector':
                        return {
                    pane: 'pane_Sectors_3',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(51,160,44,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Consumer Sector':
                        return {
                    pane: 'pane_Sectors_3',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(226,110,133,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Autarkic Sector':
                        return {
                    pane: 'pane_Sectors_3',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(194,79,30,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Free Planets Alliance':
                        return {
                    pane: 'pane_Sectors_3',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(133,158,95,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Frontier Sector':
                        return {
                    pane: 'pane_Sectors_3',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(168,211,37,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Industrial Sector':
                        return {
                    pane: 'pane_Sectors_3',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(210,43,48,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Research Sector':
                        return {
                    pane: 'pane_Sectors_3',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(1,175,255,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Trade Sector':
                        return {
                    pane: 'pane_Sectors_3',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(225,190,3,1.0)',
                    interactive: true,
                }
                        break;
                }
            }
            map.createPane('pane_Sectors_3');
            map.getPane('pane_Sectors_3').style.zIndex = 405;
            map.getPane('pane_Sectors_3').style['mix-blend-mode'] = 'normal';
            var layer_Sectors_3 = new L.geoJson(json_Sectors_3, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Sectors_3',
                layerName: 'layer_Sectors_3',
                pane: 'pane_Sectors_3',
                onEachFeature: pop_Sectors_3,
                style: style_Sectors_3_0,
            });
            bounds_group.addLayer(layer_Sectors_3);

            function pop_Characters_4(feature, layer) {
                var popupContent = '<table>\
                        <tr>\
                            <th scope="row">Character</th>\
                            <td class="visible-with-data" id="Character">' + (feature.properties['Character'] !== null ? autolinker.link(feature.properties['Character'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Book</th>\
                            <td class="visible-with-data" id="Book">' + (feature.properties['Book'] !== null ? autolinker.link(feature.properties['Book'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Travel Date</th>\
                            <td class="visible-with-data" id="Date">' + (feature.properties['Date'] !== null ? autolinker.link(feature.properties['Date'].toLocaleString()) : '') + '</td>\
                        </tr>\
                    </table>';
                layer.bindPopup(popupContent, {maxHeight: 400});
                var popup = layer.getPopup();
                var content = popup.getContent();
                var updatedContent = removeEmptyRowsFromPopupContent(content, feature);
                popup.setContent(updatedContent);
            }

            function style_Characters_4_0(feature) {
                switch(String(feature.properties['Character'])) {
                    case 'Abbey':
                        return {
                    pane: 'pane_Characters_4',
                    opacity: 1,
                    color: 'rgba(0,0,0,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 8.0,
                    fillOpacity: 0,
                    interactive: true,
                }
                        break;
                    case 'Alex':
                        return {
                    pane: 'pane_Characters_4',
                    opacity: 1,
                    color: 'rgba(0,0,0,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 8.0,
                    fillOpacity: 0,
                    interactive: true,
                }
                        break;
                    case 'Elis':
                        return {
                    pane: 'pane_Characters_4',
                    opacity: 1,
                    color: 'rgba(0,0,0,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 8.0,
                    fillOpacity: 0,
                    interactive: true,
                }
                        break;
                    case 'Thea':
                        return {
                    pane: 'pane_Characters_4',
                    opacity: 1,
                    color: 'rgba(0,0,0,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 8.0,
                    fillOpacity: 0,
                    interactive: true,
                }
                        break;
                    case 'Tia':
                        return {
                    pane: 'pane_Characters_4',
                    opacity: 1,
                    color: 'rgba(0,0,0,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 8.0,
                    fillOpacity: 0,
                    interactive: true,
                }
                        break;
                }
            }
            function style_Characters_4_1(feature) {
                switch(String(feature.properties['Character'])) {
                    case 'Abbey':
                        return {
                    pane: 'pane_Characters_4',
                    opacity: 1,
                    color: 'rgba(1,175,255,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 6.0,
                    fillOpacity: 0,
                    interactive: true,
                }
                        break;
                    case 'Alex':
                        return {
                    pane: 'pane_Characters_4',
                    opacity: 1,
                    color: 'rgba(31,120,180,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 6.0,
                    fillOpacity: 0,
                    interactive: true,
                }
                        break;
                    case 'Elis':
                        return {
                    pane: 'pane_Characters_4',
                    opacity: 1,
                    color: 'rgba(210,43,48,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 6.0,
                    fillOpacity: 0,
                    interactive: true,
                }
                        break;
                    case 'Thea':
                        return {
                    pane: 'pane_Characters_4',
                    opacity: 1,
                    color: 'rgba(251,255,0,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 6.0,
                    fillOpacity: 0,
                    interactive: true,
                }
                        break;
                    case 'Tia':
                        return {
                    pane: 'pane_Characters_4',
                    opacity: 1,
                    color: 'rgba(238,238,238,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 6.0,
                    fillOpacity: 0,
                    interactive: true,
                }
                        break;
                }
            }
            map.createPane('pane_Characters_4');
            map.getPane('pane_Characters_4').style.zIndex = 415;
            map.getPane('pane_Characters_4').style['mix-blend-mode'] = 'normal';
            var layer_Characters_4 = new L.geoJson.multiStyle(json_Characters_4, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Characters_4',
                layerName: 'layer_Characters_4',
                pane: 'pane_Characters_4',
                onEachFeature: pop_Characters_4,
                styles: [style_Characters_4_0,style_Characters_4_1,]
            });
            bounds_group.addLayer(layer_Characters_4);
            map.addLayer(layer_Characters_4);

            function pop_Diplomacy_6(feature, layer) {
                var popupContent = '<table>\
                        <tr>\
                            <th scope="row">Nation</th>\
                            <td class="visible-with-data" id="Neighbor">' + (feature.properties['Neighbor'] !== null ? autolinker.link(feature.properties['Neighbor'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Relation Status</th>\
                            <td class="visible-with-data" id="Relation">' + (feature.properties['Relation'] !== 'Self' ? autolinker.link(feature.properties['Relation'].toLocaleString()) : 'Our Country') + '</td>\
                        </tr>\
                    </table>';
                layer.bindPopup(popupContent, {maxHeight: 400});
                var popup = layer.getPopup();
                var content = popup.getContent();
                var updatedContent = removeEmptyRowsFromPopupContent(content, feature);
                popup.setContent(updatedContent);
            }

            function style_Diplomacy_6_0(feature) {
                switch(String(feature.properties['Relation'])) {
                    case 'Self':
                        return {
                    pane: 'pane_Diplomacy_6',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(19,101,201,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Friendly':
                        return {
                    pane: 'pane_Diplomacy_6',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(51,160,44,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Amicable':
                        return {
                    pane: 'pane_Diplomacy_6',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(168,211,37,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Neutral':
                        return {
                    pane: 'pane_Diplomacy_6',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(157,157,157,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Reserved':
                        return {
                    pane: 'pane_Diplomacy_6',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(255,127,0,1.0)',
                    interactive: true,
                }
                        break;
                    case 'Hostile':
                        return {
                    pane: 'pane_Diplomacy_6',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1.0, 
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(210,43,48,1.0)',
                    interactive: true,
                }
                        break;
                }
            }
            map.createPane('pane_Diplomacy_6');
            map.getPane('pane_Diplomacy_6').style.zIndex = 406;
            map.getPane('pane_Diplomacy_6').style['mix-blend-mode'] = 'normal';
            var layer_Diplomacy_6 = new L.geoJson(json_Diplomacy_6, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Diplomacy_6',
                layerName: 'layer_Diplomacy_6',
                pane: 'pane_Diplomacy_6',
                onEachFeature: pop_Diplomacy_6,
                style: style_Diplomacy_6_0,
            });
            bounds_group.addLayer(layer_Diplomacy_6);

            function pop_Routes_5(feature, layer) {
                layer.on({
                    mouseout: function(e) {
                        if (typeof layer.closePopup == 'function') {
                            layer.closePopup();
                        } else {
                            layer.eachLayer(function(feature){
                                feature.closePopup()
                            });
                        }
                    },
                    mouseover: highlightFeature,
                });
            }

            function style_Routes_5_0() {
                return {
                    pane: 'pane_Routes_5',
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 8.0,
                    fillOpacity: 0,
                    interactive: true,
                }
            }
            function style_Routes_5_1() {
                return {
                    pane: 'pane_Routes_5',
                    opacity: 1,
                    color: 'rgba(255,158,23,1.0)',
                    dashArray: '',
                    lineCap: 'square',
                    lineJoin: 'bevel',
                    weight: 4.0,
                    fillOpacity: 0,
                    interactive: true,
                }
            }
            map.createPane('pane_Routes_5');
            map.getPane('pane_Routes_5').style.zIndex = 404;
            map.getPane('pane_Routes_5').style['mix-blend-mode'] = 'normal';
            var layer_Routes_5 = new L.geoJson.multiStyle(json_Routes_5, {
                attribution: '',
                interactive: true,
                dataVar: 'json_Routes_5',
                layerName: 'layer_Routes_5',
                pane: 'pane_Routes_5',
                onEachFeature: pop_Routes_5,
                styles: [style_Routes_5_0,style_Routes_5_1,]
            });
            bounds_group.addLayer(layer_Routes_5);
            
            var baseMaps = {};
            
            L.control.layers(baseMaps,{
                '<span class="layer-name">Systems</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Systems_2_11.png" /></td>\
                        <td>Star System</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Systems_2_00.png" /></td>\
                        <td>System With No Star</td>\
                    </tr>\
                </table>': layer_Systems_2,

                '<span class="layer-name">Lanes</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Lanes_1_InDevelopement0.png" /></td>\
                        <td>In Developement</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Lanes_1_Operational1.png" /></td>\
                        <td>Operational</td>\
                    </tr>\
                </table>': layer_Lanes_1,

                '<span class="layer-name">Regions</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_CorporateSystems0.png" /></td>\
                        <td>Corporate Systems</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_DuchyOfDrakar1.png" /></td>\
                        <td>Duchy Of Drakar</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_DuchyOfMeltisar2.png" /></td>\
                        <td>Duchy Of Meltisar</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_FreePlanetsAlliance3.png" /></td>\
                        <td>Free Planets Alliance</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_GhostSector4.png" /></td>\
                        <td>Ghost Sector</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_HolyErtanRepublic5.png" /></td>\
                        <td>Holy Ertan Republic</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_SolarImperium6.png" /></td>\
                        <td>Solar Imperium</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_SolarianFederation7.png" /></td>\
                        <td>Solarian Federation</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Regions_0_TheWesternFrontierSystems8.png" /></td>\
                        <td>The Western Frontier Systems</td>\
                    </tr>\
                </table>': layer_Regions_0,

                '<span class="layer-name">Character Journey</span><br />\
                <table>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Characters_4_Abbey0.png" /></td>\
                        <td>Abbey</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Characters_4_Alex1.png" /></td>\
                        <td>Alex</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Characters_4_Elis2.png" /></td>\
                        <td>Elis</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Characters_4_Thea3.png" /></td>\
                        <td>Thea</td>\
                    </tr>\
                    <tr>\
                        <td style="text-align: center;"><img src="legend/Characters_4_Tia4.png" /></td>\
                        <td>Tia</td>\
                    </tr>\
                </table>': layer_Characters_4,

                '<span class="layer-name">Economic Sectors</span><br />\
                    <table>\
                        <tr>\
                            <td style="text-align: center;"><img src="legend/Sectors_3_AgrarianSector0.png" /></td>\
                            <td>Agrarian Sector</td>\
                        </tr>\
                        <tr>\
                            <td style="text-align: center;"><img src="legend/Sectors_3_ConsumerSector1.png" /></td>\
                            <td>Consumer Sector</td>\
                        </tr>\
                        <tr>\
                            <td style="text-align: center;"><img src="legend/Sectors_3_AutarkicSector2.png" /></td>\
                            <td>Autarkic Sector</td>\
                        </tr>\
                        <tr>\
                            <td style="text-align: center;"><img src="legend/Sectors_3_FreePlanetsAlliance3.png" /></td>\
                            <td>Free Planets Alliance</td>\
                        </tr>\
                        <tr>\
                            <td style="text-align: center;"><img src="legend/Sectors_3_FrontierSector4.png" /></td>\
                            <td>Frontier Sector</td>\
                        </tr>\
                        <tr>\
                            <td style="text-align: center;"><img src="legend/Sectors_3_IndustrialSector5.png" /></td>\
                            <td>Industrial Sector</td>\
                        </tr>\
                        <tr>\
                            <td style="text-align: center;"><img src="legend/Sectors_3_ResearchSector6.png" /></td>\
                            <td>Research Sector</td>\
                        </tr>\
                        <tr>\
                            <td style="text-align: center;"><img src="legend/Sectors_3_TradeSector7.png" /></td>\
                            <td>Trade Sector</td>\
                        </tr>\
                    </table>': layer_Sectors_3,

                    '<span class="layer-name">Diplomacy</span><br />\
                        <table>\
                            <tr>\
                                <td style="text-align: center;"><img src="legend/Diplomacy_6_Self0.png" /></td>\
                                <td>Self</td>\
                            </tr>\
                            <tr>\
                                <td style="text-align: center;"><img src="legend/Diplomacy_6_Friendly1.png" /></td>\
                                <td>Friendly</td>\
                            </tr>\
                            <tr>\
                                <td style="text-align: center;"><img src="legend/Diplomacy_6_Amicable2.png" /></td>\
                                <td>Amicable</td>\
                            </tr>\
                            <tr>\
                                <td style="text-align: center;"><img src="legend/Diplomacy_6_Neutral3.png" /></td>\
                                <td>Neutral</td>\
                            </tr>\
                            <tr>\
                                <td style="text-align: center;"><img src="legend/Diplomacy_6_Reserved4.png" /></td>\
                                <td>Reserved</td>\
                            </tr>\
                            <tr>\
                                <td style="text-align: center;"><img src="legend/Diplomacy_6_Hostile5.png" /></td>\
                                <td>Hostile</td>\
                            </tr>\
                        </table>': layer_Diplomacy_6,
            },{collapsed:true}).addTo(map);
            
            map.on("zoomend", function(){
                if (map.hasLayer(layer_Systems_2)) {
                    if (map.getZoom() <= 10.5 && map.getZoom() >= 15) {
                            layer_Systems_2.eachLayer(function (layer) {
                                layer.openTooltip();
                            });
                        } else {
                            layer_Systems_2.eachLayer(function (layer) {
                                layer.closeTooltip();
                            });
                        }
                    }
            });

            setBounds();
            if (map.hasLayer(layer_Systems_2)) {
                if (map.getZoom() <= 10.5 && map.getZoom() >= 15) {
                    layer_Systems_2.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_Systems_2.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }

            map.addControl(new L.Control.Search({
            layer: layer_Systems_2,
            initial: false,
            hideMarkerOnCollapse: true,
            propertyName: 'System_Nam'}));
        document.getElementsByClassName('search-button')[0].className +=
         ' fa fa-binoculars';

            var mapDiv = document.getElementById('map');
            mapDiv.style.height = "95%";

            var row = document.createElement('div');
            row.className="row";
            row.id="all";
            row.style.height = "100%";

            var col1 = document.createElement('div');
            col1.className="col9";
            col1.id = "mapWindow";
            col1.style.height = "100%";
            col1.style.width = "80%";
            col1.style.display = "inline-block";

            var col2 = document.createElement('div');
            col2.className="col3";
            col2.id = "menu";
            col2.style.display = "inline-block";

            mapDiv.parentNode.insertBefore(row, mapDiv);
            document.getElementById("all").appendChild(col1);
            document.getElementById("all").appendChild(col2);

            var mapTitle = document.createElement('div');
            mapTitle.innerHTML  = 'Shipcore Interactive Map';
            mapTitle.className = 'maptitle';
            mapTitle.style.height = "5%";

            col1.appendChild(mapTitle)
            col1.appendChild(mapDiv)
            
            var Filters = {
                "Orbtl_Clny": "int",
                "Unexplored": "int",
                "Notbl_Minb": "int",
                "Inhabitabl": "int",
                "Nation": "str",
                "Star_Presc": "str",
                "Homeworld": "str",
                "Capital": "str",
                "Core_Sys": "str",
                "Mining_Sys": "str",
                "Idustr_Sys": "str",
                "Fuel_Depot": "str",
                "Mt_Base": "str",
                "Unsurv_bod": "str",
                "New_Lane": "str",
                "System_Nam": "str",
                "Type": "str",
                "Status": "str",
                "Character": "str",
                "Book": "str",
                "Sector": "str"
            };
            
            function filterFunc() {
                map.eachLayer(function(lyr){
                    if ("options" in lyr && "dataVar" in lyr["options"]){
                        features = this[lyr["options"]["dataVar"]].features.slice(0);
                        try{
                            for (key in Filters){
                                keyS = key.replace(/[^a-zA-Z0-9_]/g, "")
                                if (Filters[key] == "str" || Filters[key] == "bool"){
                                    var selection = [];
                                    var options = document.getElementById("sel_" + keyS).options
                                    for (var i=0; i < options.length; i++) {
                                        if (options[i].selected) selection.push(options[i].value);
                                    }
                                    try{
                                        if (key in features[0].properties){
                                            for (i = features.length - 1; i >= 0; --i){
                                                if (selection.indexOf(features[i].properties[key])<0 && selection.length>0) {
                                                    features.splice(i,1);
                                                }
                                            }
                                        }
                                    } catch(err){}
                                }

                                if (Filters[key] == "int"){
                                    sliderVals =  document.getElementById("div_" + keyS).noUiSlider.get();
                                    try{
                                        if (key in features[0].properties){
                                            for (i = features.length - 1; i >= 0; --i){
                                                var propertyValue = parseInt(features[i].properties[key]);
                                                if (isNaN(propertyValue)){
                                                    propertyValue = 0;
                                                }
                                                if (propertyValue < sliderVals[0] || propertyValue > sliderVals[1]){
                                                        features.splice(i,1);
                                                }
                                            }
                                        }
                                    } catch(err){}
                                }

                                if (Filters[key] == "real"){
                                    sliderVals =  document.getElementById("div_" + keyS).noUiSlider.get();
                                    try{
                                        if (key in features[0].properties){
                                            for (i = features.length - 1; i >= 0; --i){
                                                var propertyValue = parseFloat(features[i].properties[key]);
                                                if (isNaN(propertyValue)){
                                                    propertyValue = 0;
                                                }
                                                if (propertyValue < sliderVals[0] || propertyValue > sliderVals[1]){
                                                        features.splice(i,1);
                                                }
                                            }
                                        }
                                    } catch(err){}
                                }

                                if (Filters[key] == "date" || Filters[key] == "datetime" || Filters[key] == "time"){
                                    try{
                                        if (key in features[0].properties){
                                            HTMLkey = key.replace(/[&\/\\#,+()$~%.'":*?<>{} ]/g, '');
                                            startdate = document.getElementById("dat_" + HTMLkey + "_date1").value.replace(" ", "T");
                                            enddate = document.getElementById("dat_" + HTMLkey + "_date2").value.replace(" ", "T");
                                            for (i = features.length - 1; i >= 0; --i){
                                                if (features[i].properties[key] < startdate || features[i].properties[key] > enddate){
                                                    features.splice(i,1);
                                                }
                                            }
                                        }
                                    } catch(err){}
                                }
                            }
                        } catch(err){}
                        this[lyr["options"]["layerName"]].clearLayers();
                        this[lyr["options"]["layerName"]].addData(features);
                    }
                })
            }

                // Orbital/Colony Slider Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var menu_header = document.createElement('div');
                menu_header.innerHTML  = 'FILTERS';
                menu_header.className = 'menuheader';
                document.getElementById("menu").appendChild(menu_header);

                var lab_Orbtl_Clny = document.createElement('div');
                lab_Orbtl_Clny.innerHTML  = 'ORBITALS / COLONIES: <span id="val_Orbtl_Clny"></span>';
                lab_Orbtl_Clny.className = 'filterlabel';
                document.getElementById("menu").appendChild(lab_Orbtl_Clny);

                var reset_Orbtl_Clny = document.createElement('div');
                reset_Orbtl_Clny.innerHTML = 'clear filter';
                reset_Orbtl_Clny.className = 'filterlabel';
                lab_Orbtl_Clny.className = 'filterlabel';
                reset_Orbtl_Clny.onclick = function() {
                    sel_Orbtl_Clny.noUiSlider.reset();
                };
                document.getElementById("menu").appendChild(reset_Orbtl_Clny);

                var div_Orbtl_Clny = document.createElement("div");
                div_Orbtl_Clny.id = "div_Orbtl_Clny";
                div_Orbtl_Clny.className = "slider";
                document.getElementById("menu").appendChild(div_Orbtl_Clny);

                var sel_Orbtl_Clny = document.getElementById('div_Orbtl_Clny');
                noUiSlider.create(sel_Orbtl_Clny, {
                    connect: true,
                    start: [0, 258],
                    step: 1,
                    format: wNumb({
                        decimals: 0,
                        }),
                    range: {
                    min: 0,
                    max: 258
                    }
                });
                sel_Orbtl_Clny.noUiSlider.on('update', function (values) {
                filterVals =[];
                for (value in values){
                    filterVals.push(parseInt(value))
                }
                val_Orbtl_Clny = document.getElementById('val_Orbtl_Clny');
                val_Orbtl_Clny.innerHTML = values.join(' - ');
                    filterFunc()
                });
                
                // Unexplored Lanes Slider Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var lab_Unexplored = document.createElement('div');
                lab_Unexplored.innerHTML  = 'UNEXPLORED LANES: <span id="val_Unexplored"></span>';
                lab_Unexplored.className = 'filterlabel';
                document.getElementById("menu").appendChild(lab_Unexplored);

                var reset_Unexplored = document.createElement('div');
                reset_Unexplored.innerHTML = 'clear filter';
                reset_Unexplored.className = 'filterlabel';
                lab_Unexplored.className = 'filterlabel';
                reset_Unexplored.onclick = function() {
                    sel_Unexplored.noUiSlider.reset();
                };
                document.getElementById("menu").appendChild(reset_Unexplored);

                var div_Unexplored = document.createElement("div");
                div_Unexplored.id = "div_Unexplored";
                div_Unexplored.className = "slider";
                document.getElementById("menu").appendChild(div_Unexplored);

                var sel_Unexplored = document.getElementById('div_Unexplored');
                noUiSlider.create(sel_Unexplored, {
                    connect: true,
                    start: [0, 4],
                    step: 1,
                    format: wNumb({
                        decimals: 0,
                        }),
                    range: {
                    min: 0,
                    max: 4
                    }
                });
                sel_Unexplored.noUiSlider.on('update', function (values) {
                filterVals =[];
                for (value in values){
                    filterVals.push(parseInt(value))
                }
                val_Unexplored = document.getElementById('val_Unexplored');
                val_Unexplored.innerHTML = values.join(' - ');
                    filterFunc()
                });

                // Minable/Rogue Slider Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var lab_Notbl_Minb = document.createElement('div');
                lab_Notbl_Minb.innerHTML  = 'MINABLE BODIES / ROGUE PLANETS: <span id="val_Notbl_Minb"></span>';
                lab_Notbl_Minb.className = 'filterlabel';
                document.getElementById("menu").appendChild(lab_Notbl_Minb);

                var reset_Notbl_Minb = document.createElement('div');
                reset_Notbl_Minb.innerHTML = 'clear filter';
                reset_Notbl_Minb.className = 'filterlabel';
                lab_Notbl_Minb.className = 'filterlabel';
                reset_Notbl_Minb.onclick = function() {
                    sel_Notbl_Minb.noUiSlider.reset();
                };
                document.getElementById("menu").appendChild(reset_Notbl_Minb);

                var div_Notbl_Minb = document.createElement("div");
                div_Notbl_Minb.id = "div_Notbl_Minb";
                div_Notbl_Minb.className = "slider";
                document.getElementById("menu").appendChild(div_Notbl_Minb);

                var sel_Notbl_Minb = document.getElementById('div_Notbl_Minb');
                noUiSlider.create(sel_Notbl_Minb, {
                    connect: true,
                    start: [0, 5],
                    step: 1,
                    format: wNumb({
                        decimals: 0,
                        }),
                    range: {
                    min: 0,
                    max: 5
                    }
                });
                sel_Notbl_Minb.noUiSlider.on('update', function (values) {
                filterVals =[];
                for (value in values){
                    filterVals.push(parseInt(value))
                }
                val_Notbl_Minb = document.getElementById('val_Notbl_Minb');
                val_Notbl_Minb.innerHTML = values.join(' - ');
                    filterFunc()
                });

                // Inhabitable Planets Slider Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var lab_Inhabitabl = document.createElement('div');
                lab_Inhabitabl.innerHTML  = 'INHABITABLE WORLDS: <span id="val_Inhabitabl"></span>';
                lab_Inhabitabl.className = 'filterlabel';
                document.getElementById("menu").appendChild(lab_Inhabitabl);

                var reset_Inhabitabl = document.createElement('div');
                reset_Inhabitabl.innerHTML = 'clear filter';
                reset_Inhabitabl.className = 'filterlabel';
                lab_Inhabitabl.className = 'filterlabel';
                reset_Inhabitabl.onclick = function() {
                    sel_Inhabitabl.noUiSlider.reset();
                };
                document.getElementById("menu").appendChild(reset_Inhabitabl);

                var div_Inhabitabl = document.createElement("div");
                div_Inhabitabl.id = "div_Inhabitabl";
                div_Inhabitabl.className = "slider";
                document.getElementById("menu").appendChild(div_Inhabitabl);

                var sel_Inhabitabl = document.getElementById('div_Inhabitabl');
                noUiSlider.create(sel_Inhabitabl, {
                    connect: true,
                    start: [0, 4],
                    step: 1,
                    format: wNumb({
                        decimals: 0,
                        }),
                    range: {
                    min: 0,
                    max: 4
                    }
                });
                sel_Inhabitabl.noUiSlider.on('update', function (values) {
                filterVals =[];
                for (value in values){
                    filterVals.push(parseInt(value))
                }
                val_Inhabitabl = document.getElementById('val_Inhabitabl');
                val_Inhabitabl.innerHTML = values.join(' - ');
                    filterFunc()
                });

                // Region Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Nation = document.createElement('div');
                div_Nation.id = "div_Nation";
                div_Nation.className= "filterselect";
                document.getElementById("menu").appendChild(div_Nation);
                sel_Nation = document.createElement('select');
                sel_Nation.multiple = true;
                sel_Nation.size = 9;
                sel_Nation.id = "sel_Nation";

                var lab_Nation = document.createElement('div');
                lab_Nation.innerHTML = 'REGIONS';
                lab_Nation.className = 'filterlabel';
                div_Nation.appendChild(lab_Nation);

                var reset_Nation = document.createElement('div');
                reset_Nation.innerHTML = 'clear filter';
                reset_Nation.className = 'filterlabel';
                reset_Nation.onclick = function() {
                    var options = document.getElementById("sel_Nation").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Nation.appendChild(reset_Nation);

                var Nation_options_str = "";
                sel_Nation.onchange = function(){filterFunc()};
                Nation_options_str  += '<option value="Corporate Systems">Corporate Systems</option>';
                Nation_options_str  += '<option value="Duchy of Drakar">Duchy of Drakar</option>';
                Nation_options_str  += '<option value="Duchy of Meltisar">Duchy of Meltisar</option>';
                Nation_options_str  += '<option value="Free Planets Alliance">Free Planets Alliance</option>';
                Nation_options_str  += '<option value="Ghost Sector">Ghost Sector</option>';
                Nation_options_str  += '<option value="Holy Ertan Republic">Holy Ertan Republic</option>';
                Nation_options_str  += '<option value="Solar Imperium">Solar Imperium</option>';
                Nation_options_str  += '<option value="Solarian Federation">Solarian Federation</option>';
                Nation_options_str  += '<option value="The Western Frontier Systems">The Western Frontier Systems</option>';
                sel_Nation.innerHTML = Nation_options_str;
                div_Nation.appendChild(sel_Nation);

                // System Star Presence Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));
                
                var div_Star_Presc = document.createElement('div');
                div_Star_Presc.id = "div_Star_Presc";
                div_Star_Presc.className= "filterselect";
                document.getElementById("menu").appendChild(div_Star_Presc);
                sel_Star_Presc = document.createElement('select');
                sel_Star_Presc.multiple = true;
                sel_Star_Presc.size = 2;
                sel_Star_Presc.id = "sel_Star_Presc";

                var lab_Star_Presc = document.createElement('div');
                lab_Star_Presc.innerHTML = 'STAR PRESENCE IN SYSTEM';
                lab_Star_Presc.className = 'filterlabel';
                div_Star_Presc.appendChild(lab_Star_Presc);

                var reset_Star_Presc = document.createElement('div');
                reset_Star_Presc.innerHTML = 'clear filter';
                reset_Star_Presc.className = 'filterlabel';
                reset_Star_Presc.onclick = function() {
                    var options = document.getElementById("sel_Star_Presc").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Star_Presc.appendChild(reset_Star_Presc);

                var Star_Presc_options_str = "";
                sel_Star_Presc.onchange = function(){filterFunc()};
                Star_Presc_options_str  += '<option value="1">YES</option>';
                Star_Presc_options_str  += '<option value="0">NO</option>';
                sel_Star_Presc.innerHTML = Star_Presc_options_str;
                div_Star_Presc.appendChild(sel_Star_Presc);

                // Homeworld Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Homeworld = document.createElement('div');
                div_Homeworld.id = "div_Homeworld";
                div_Homeworld.className= "filterselect";
                document.getElementById("menu").appendChild(div_Homeworld);
                sel_Homeworld = document.createElement('select');
                sel_Homeworld.multiple = true;
                sel_Homeworld.size = 1;
                sel_Homeworld.id = "sel_Homeworld";

                var lab_Homeworld = document.createElement('div');
                lab_Homeworld.innerHTML = 'HOMEWORLD OF HUMANITY';
                lab_Homeworld.className = 'filterlabel';
                div_Homeworld.appendChild(lab_Homeworld);

                var reset_Homeworld = document.createElement('div');
                reset_Homeworld.innerHTML = 'clear filter';
                reset_Homeworld.className = 'filterlabel';
                reset_Homeworld.onclick = function() {
                    var options = document.getElementById("sel_Homeworld").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Homeworld.appendChild(reset_Homeworld);

                var Homeworld_options_str = "";
                sel_Homeworld.onchange = function(){filterFunc()};
                Homeworld_options_str  += '<option value="1">SHOW</option>';
                sel_Homeworld.innerHTML = Homeworld_options_str;
                div_Homeworld.appendChild(sel_Homeworld);

                // Capital System Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Capital = document.createElement('div');
                div_Capital.id = "div_Capital";
                div_Capital.className= "filterselect";
                document.getElementById("menu").appendChild(div_Capital);
                sel_Capital = document.createElement('select');
                sel_Capital.multiple = true;
                sel_Capital.size = 1;
                sel_Capital.id = "sel_Capital";

                var lab_Capital = document.createElement('div');
                lab_Capital.innerHTML = 'CAPITAL SYSTEMS';
                lab_Capital.className = 'filterlabel';
                div_Capital.appendChild(lab_Capital);

                var reset_Capital = document.createElement('div');
                reset_Capital.innerHTML = 'clear filter';
                reset_Capital.className = 'filterlabel';
                reset_Capital.onclick = function() {
                    var options = document.getElementById("sel_Capital").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Capital.appendChild(reset_Capital);

                var Capital_options_str = "";
                sel_Capital.onchange = function(){filterFunc()};
                Capital_options_str  += '<option value="1">SHOW</option>';
                sel_Capital.innerHTML = Capital_options_str;
                div_Capital.appendChild(sel_Capital);

                // Core System Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Core_Sys = document.createElement('div');
                div_Core_Sys.id = "div_Core_Sys";
                div_Core_Sys.className= "filterselect";
                document.getElementById("menu").appendChild(div_Core_Sys);
                sel_Core_Sys = document.createElement('select');
                sel_Core_Sys.multiple = true;
                sel_Core_Sys.size = 1;
                sel_Core_Sys.id = "sel_Core_Sys";

                var lab_Core_Sys = document.createElement('div');
                lab_Core_Sys.innerHTML = 'CORE SYSTEMS';
                lab_Core_Sys.className = 'filterlabel';
                div_Core_Sys.appendChild(lab_Core_Sys);
                var reset_Core_Sys = document.createElement('div');
                reset_Core_Sys.innerHTML = 'clear filter';
                reset_Core_Sys.className = 'filterlabel';
                reset_Core_Sys.onclick = function() {
                    var options = document.getElementById("sel_Core_Sys").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Core_Sys.appendChild(reset_Core_Sys);

                var Core_Sys_options_str = "";
                sel_Core_Sys.onchange = function(){filterFunc()};
                Core_Sys_options_str  += '<option value="1">SHOW</option>';
                sel_Core_Sys.innerHTML = Core_Sys_options_str;
                div_Core_Sys.appendChild(sel_Core_Sys);

                // Mining System Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Mining_Sys = document.createElement('div');
                div_Mining_Sys.id = "div_Mining_Sys";
                div_Mining_Sys.className= "filterselect";
                document.getElementById("menu").appendChild(div_Mining_Sys);
                sel_Mining_Sys = document.createElement('select');
                sel_Mining_Sys.multiple = true;
                sel_Mining_Sys.size = 1;
                sel_Mining_Sys.id = "sel_Mining_Sys";

                var lab_Mining_Sys = document.createElement('div');
                lab_Mining_Sys.innerHTML = 'MINING SYSTEMS';
                lab_Mining_Sys.className = 'filterlabel';
                div_Mining_Sys.appendChild(lab_Mining_Sys);

                var reset_Mining_Sys = document.createElement('div');
                reset_Mining_Sys.innerHTML = 'clear filter';
                reset_Mining_Sys.className = 'filterlabel';
                reset_Mining_Sys.onclick = function() {
                    var options = document.getElementById("sel_Mining_Sys").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Mining_Sys.appendChild(reset_Mining_Sys);

                var Mining_Sys_options_str = "";
                sel_Mining_Sys.onchange = function(){filterFunc()};
                Mining_Sys_options_str  += '<option value="1">SHOW</option>';
                sel_Mining_Sys.innerHTML = Mining_Sys_options_str;
                div_Mining_Sys.appendChild(sel_Mining_Sys);

                // Mining System Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Idustr_Sys = document.createElement('div');
                div_Idustr_Sys.id = "div_Idustr_Sys";
                div_Idustr_Sys.className= "filterselect";
                document.getElementById("menu").appendChild(div_Idustr_Sys);
                sel_Idustr_Sys = document.createElement('select');
                sel_Idustr_Sys.multiple = true;
                sel_Idustr_Sys.size = 1;
                sel_Idustr_Sys.id = "sel_Idustr_Sys";

                var lab_Idustr_Sys = document.createElement('div');
                lab_Idustr_Sys.innerHTML = 'INDUSTRIAL SYSTEMS';
                lab_Idustr_Sys.className = 'filterlabel';
                div_Idustr_Sys.appendChild(lab_Idustr_Sys);
                
                var reset_Idustr_Sys = document.createElement('div');
                reset_Idustr_Sys.innerHTML = 'clear filter';
                reset_Idustr_Sys.className = 'filterlabel';
                reset_Idustr_Sys.onclick = function() {
                    var options = document.getElementById("sel_Idustr_Sys").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Idustr_Sys.appendChild(reset_Idustr_Sys);

                var Idustr_Sys_options_str = "";
                sel_Idustr_Sys.onchange = function(){filterFunc()};
                Idustr_Sys_options_str  += '<option value="1">SHOW</option>';
                sel_Idustr_Sys.innerHTML = Idustr_Sys_options_str;
                div_Idustr_Sys.appendChild(sel_Idustr_Sys);

                // Fuel Depot in System Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Fuel_Depot = document.createElement('div');
                div_Fuel_Depot.id = "div_Fuel_Depot";
                div_Fuel_Depot.className= "filterselect";
                document.getElementById("menu").appendChild(div_Fuel_Depot);
                sel_Fuel_Depot = document.createElement('select');
                sel_Fuel_Depot.multiple = true;
                sel_Fuel_Depot.size = 1;
                sel_Fuel_Depot.id = "sel_Fuel_Depot";

                var lab_Fuel_Depot = document.createElement('div');
                lab_Fuel_Depot.innerHTML = 'FUEL DEPOTS';
                lab_Fuel_Depot.className = 'filterlabel';
                div_Fuel_Depot.appendChild(lab_Fuel_Depot);

                var reset_Fuel_Depot = document.createElement('div');
                reset_Fuel_Depot.innerHTML = 'clear filter';
                reset_Fuel_Depot.className = 'filterlabel';
                reset_Fuel_Depot.onclick = function() {
                    var options = document.getElementById("sel_Fuel_Depot").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Fuel_Depot.appendChild(reset_Fuel_Depot);

                var Fuel_Depot_options_str = "";
                sel_Fuel_Depot.onchange = function(){filterFunc()};
                Fuel_Depot_options_str  += '<option value="1">SHOW</option>';
                sel_Fuel_Depot.innerHTML = Fuel_Depot_options_str;
                div_Fuel_Depot.appendChild(sel_Fuel_Depot);

                // Maintenence Base in System Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Mt_Base = document.createElement('div');
                div_Mt_Base.id = "div_Mt_Base";
                div_Mt_Base.className= "filterselect";
                document.getElementById("menu").appendChild(div_Mt_Base);
                sel_Mt_Base = document.createElement('select');
                sel_Mt_Base.multiple = true;
                sel_Mt_Base.size = 1;
                sel_Mt_Base.id = "sel_Mt_Base";

                var lab_Mt_Base = document.createElement('div');
                lab_Mt_Base.innerHTML = 'MAINTENENCE BASES';
                lab_Mt_Base.className = 'filterlabel';
                div_Mt_Base.appendChild(lab_Mt_Base);

                var reset_Mt_Base = document.createElement('div');
                reset_Mt_Base.innerHTML = 'clear filter';
                reset_Mt_Base.className = 'filterlabel';
                reset_Mt_Base.onclick = function() {
                    var options = document.getElementById("sel_Mt_Base").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Mt_Base.appendChild(reset_Mt_Base);

                var Mt_Base_options_str = "";
                sel_Mt_Base.onchange = function(){filterFunc()};
                Mt_Base_options_str  += '<option value="1">SHOW</option>';
                sel_Mt_Base.innerHTML = Mt_Base_options_str;
                div_Mt_Base.appendChild(sel_Mt_Base);
                
                // Unsurveyed Bodies Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Unsurv_bod = document.createElement('div');
                div_Unsurv_bod.id = "div_Unsurv_bod";
                div_Unsurv_bod.className= "filterselect";
                document.getElementById("menu").appendChild(div_Unsurv_bod);
                sel_Unsurv_bod = document.createElement('select');
                sel_Unsurv_bod.multiple = true;
                sel_Unsurv_bod.size = 1;
                sel_Unsurv_bod.id = "sel_Unsurv_bod";

                var lab_Unsurv_bod = document.createElement('div');
                lab_Unsurv_bod.innerHTML = 'SYSTEMS WITH UNSURVEYED BODIES';
                lab_Unsurv_bod.className = 'filterlabel';
                div_Unsurv_bod.appendChild(lab_Unsurv_bod);

                var reset_Unsurv_bod = document.createElement('div');
                reset_Unsurv_bod.innerHTML = 'clear filter';
                reset_Unsurv_bod.className = 'filterlabel';
                reset_Unsurv_bod.onclick = function() {
                    var options = document.getElementById("sel_Unsurv_bod").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Unsurv_bod.appendChild(reset_Unsurv_bod);

                var Unsurv_bod_options_str = "";
                sel_Unsurv_bod.onchange = function(){filterFunc()};
                Unsurv_bod_options_str  += '<option value="1">SHOW</option>';
                sel_Unsurv_bod.innerHTML = Unsurv_bod_options_str;
                div_Unsurv_bod.appendChild(sel_Unsurv_bod);

                // New Lane Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_New_Lane = document.createElement('div');
                div_New_Lane.id = "div_New_Lane";
                div_New_Lane.className= "filterselect";
                document.getElementById("menu").appendChild(div_New_Lane);
                sel_New_Lane = document.createElement('select');
                sel_New_Lane.multiple = true;
                sel_New_Lane.size = 1;
                sel_New_Lane.id = "sel_New_Lane";

                var lab_New_Lane = document.createElement('div');
                lab_New_Lane.innerHTML = 'SYSTEMS WHERE A NEW STARLINE IS BEING RESEARCHED';
                lab_New_Lane.className = 'filterlabel';
                div_New_Lane.appendChild(lab_New_Lane);

                var reset_New_Lane = document.createElement('div');
                reset_New_Lane.innerHTML = 'clear filter';
                reset_New_Lane.className = 'filterlabel';
                reset_New_Lane.onclick = function() {
                    var options = document.getElementById("sel_New_Lane").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_New_Lane.appendChild(reset_New_Lane);

                var New_Lane_options_str = "";
                sel_New_Lane.onchange = function(){filterFunc()};
                New_Lane_options_str  += '<option value="1">SHOW</option>';
                sel_New_Lane.innerHTML = New_Lane_options_str;
                div_New_Lane.appendChild(sel_New_Lane);                

                // Systems Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_System_Nam = document.createElement('div');
                div_System_Nam.id = "div_System_Nam";
                div_System_Nam.className= "filterselect";
                document.getElementById("menu").appendChild(div_System_Nam);
                sel_System_Nam = document.createElement('select');
                sel_System_Nam.multiple = true;
                sel_System_Nam.size = 5;
                sel_System_Nam.id = "sel_System_Nam";

                var lab_System_Nam = document.createElement('div');
                lab_System_Nam.innerHTML = 'SYSTEM NAME';
                lab_System_Nam.className = 'filterlabel';
                div_System_Nam.appendChild(lab_System_Nam);

                var reset_System_Nam = document.createElement('div');
                reset_System_Nam.innerHTML = 'clear filter';
                reset_System_Nam.className = 'filterlabel';
                reset_System_Nam.onclick = function() {
                    var options = document.getElementById("sel_System_Nam").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_System_Nam.appendChild(reset_System_Nam);

                var System_Nam_options_str = "";
                sel_System_Nam.onchange = function(){filterFunc()};
                System_Nam_options_str  += '<option value="1 Octantis">1 Octantis</option>';
                System_Nam_options_str  += '<option value="1 Pavonis">1 Pavonis</option>';
                System_Nam_options_str  += '<option value="10 Cassiopeiae">10 Cassiopeiae</option>';
                System_Nam_options_str  += '<option value="101 Leonis">101 Leonis</option>';
                System_Nam_options_str  += '<option value="102 Leonis">102 Leonis</option>';
                System_Nam_options_str  += '<option value="103 Leonis">103 Leonis</option>';
                System_Nam_options_str  += '<option value="104 Ceti">104 Ceti</option>';
                System_Nam_options_str  += '<option value="106 Draconis">106 Draconis</option>';
                System_Nam_options_str  += '<option value="107 Piscium">107 Piscium</option>';
                System_Nam_options_str  += '<option value="109 Aquarii">109 Aquarii</option>';
                System_Nam_options_str  += '<option value="110 Aquarii">110 Aquarii</option>';
                System_Nam_options_str  += '<option value="111 Ceti">111 Ceti</option>';
                System_Nam_options_str  += '<option value="111 Virginis">111 Virginis</option>';
                System_Nam_options_str  += '<option value="112 Virginis">112 Virginis</option>';
                System_Nam_options_str  += '<option value="113 Aquarii">113 Aquarii</option>';
                System_Nam_options_str  += '<option value="113 Virginis">113 Virginis</option>';
                System_Nam_options_str  += '<option value="114 Aquarii">114 Aquarii</option>';
                System_Nam_options_str  += '<option value="114 Ceti">114 Ceti</option>';
                System_Nam_options_str  += '<option value="114 Piscium">114 Piscium</option>';
                System_Nam_options_str  += '<option value="114 Virginis">114 Virginis</option>';
                System_Nam_options_str  += '<option value="115 Aquarii">115 Aquarii</option>';
                System_Nam_options_str  += '<option value="115 Herculis">115 Herculis</option>';
                System_Nam_options_str  += '<option value="115 Piscium">115 Piscium</option>';
                System_Nam_options_str  += '<option value="115 Virginis">115 Virginis</option>';
                System_Nam_options_str  += '<option value="116 Ceti">116 Ceti</option>';
                System_Nam_options_str  += '<option value="116 Herculis">116 Herculis</option>';
                System_Nam_options_str  += '<option value="116 Piscium">116 Piscium</option>';
                System_Nam_options_str  += '<option value="116 Ursae Majoris">116 Ursae Majoris</option>';
                System_Nam_options_str  += '<option value="116 Virginis">116 Virginis</option>';
                System_Nam_options_str  += '<option value="117 Virginis">117 Virginis</option>';
                System_Nam_options_str  += '<option value="118 Piscium">118 Piscium</option>';
                System_Nam_options_str  += '<option value="118 Virginis">118 Virginis</option>';
                System_Nam_options_str  += '<option value="119 Herculis">119 Herculis</option>';
                System_Nam_options_str  += '<option value="119 Piscium">119 Piscium</option>';
                System_Nam_options_str  += '<option value="119 Virginis">119 Virginis</option>';
                System_Nam_options_str  += '<option value="120 Herculis">120 Herculis</option>';
                System_Nam_options_str  += '<option value="120 Piscium">120 Piscium</option>';
                System_Nam_options_str  += '<option value="120 Virginis">120 Virginis</option>';
                System_Nam_options_str  += '<option value="121 Aquarii">121 Aquarii</option>';
                System_Nam_options_str  += '<option value="121 Piscium">121 Piscium</option>';
                System_Nam_options_str  += '<option value="121 Virginis">121 Virginis</option>';
                System_Nam_options_str  += '<option value="122 Piscium">122 Piscium</option>';
                System_Nam_options_str  += '<option value="123 Piscium">123 Piscium</option>';
                System_Nam_options_str  += '<option value="124 Herculis">124 Herculis</option>';
                System_Nam_options_str  += '<option value="124 Virginis">124 Virginis</option>';
                System_Nam_options_str  += '<option value="125 Piscium">125 Piscium</option>';
                System_Nam_options_str  += '<option value="125 Virginis">125 Virginis</option>';
                System_Nam_options_str  += '<option value="126 Piscium">126 Piscium</option>';
                System_Nam_options_str  += '<option value="126 Virginis">126 Virginis</option>';
                System_Nam_options_str  += '<option value="13 Centauri">13 Centauri</option>';
                System_Nam_options_str  += '<option value="131 Virginis">131 Virginis</option>';
                System_Nam_options_str  += '<option value="132 Virginis">132 Virginis</option>';
                System_Nam_options_str  += '<option value="135 Virginis">135 Virginis</option>';
                System_Nam_options_str  += '<option value="14 Centauri">14 Centauri</option>';
                System_Nam_options_str  += '<option value="142 Tauri">142 Tauri</option>';
                System_Nam_options_str  += '<option value="144 Tauri">144 Tauri</option>';
                System_Nam_options_str  += '<option value="15 Cassiopeiae">15 Cassiopeiae</option>';
                System_Nam_options_str  += '<option value="16 Cassiopeiae">16 Cassiopeiae</option>';
                System_Nam_options_str  += '<option value="2 Octantis">2 Octantis</option>';
                System_Nam_options_str  += '<option value="25 Ursae Minoris">25 Ursae Minoris</option>';
                System_Nam_options_str  += '<option value="36 Cephei">36 Cephei</option>';
                System_Nam_options_str  += '<option value="52 Capricorni">52 Capricorni</option>';
                System_Nam_options_str  += '<option value="56 Cassiopeiae">56 Cassiopeiae</option>';
                System_Nam_options_str  += '<option value="57 Cassiopeiae">57 Cassiopeiae</option>';
                System_Nam_options_str  += '<option value="6 Centauri">6 Centauri</option>';
                System_Nam_options_str  += '<option value="6 Lupi">6 Lupi</option>';
                System_Nam_options_str  += '<option value="61 Hydrae">61 Hydrae</option>';
                System_Nam_options_str  += '<option value="61 Virginis">61 Virginis</option>';
                System_Nam_options_str  += '<option value="63 Hydrae">63 Hydrae</option>';
                System_Nam_options_str  += '<option value="64 Hydrae">64 Hydrae</option>';
                System_Nam_options_str  += '<option value="69 Andromedae">69 Andromedae</option>';
                System_Nam_options_str  += '<option value="7 Centauri">7 Centauri</option>';
                System_Nam_options_str  += '<option value="7 Octantis">7 Octantis</option>';
                System_Nam_options_str  += '<option value="70 Andromedae">70 Andromedae</option>';
                System_Nam_options_str  += '<option value="70 Hydrae">70 Hydrae</option>';
                System_Nam_options_str  += '<option value="73 Eridani">73 Eridani</option>';
                System_Nam_options_str  += '<option value="75 Ophiuchi">75 Ophiuchi</option>';
                System_Nam_options_str  += '<option value="76 Ophiuchi">76 Ophiuchi</option>';
                System_Nam_options_str  += '<option value="78 Ophiuchi">78 Ophiuchi</option>';
                System_Nam_options_str  += '<option value="80 Ophiuchi">80 Ophiuchi</option>';
                System_Nam_options_str  += '<option value="81 Draconis">81 Draconis</option>';
                System_Nam_options_str  += '<option value="81 Orionis">81 Orionis</option>';
                System_Nam_options_str  += '<option value="82 Eridani">82 Eridani</option>';
                System_Nam_options_str  += '<option value="83 Draconis">83 Draconis</option>';
                System_Nam_options_str  += '<option value="84 Cancri">84 Cancri</option>';
                System_Nam_options_str  += '<option value="84 Orionis">84 Orionis</option>';
                System_Nam_options_str  += '<option value="85 Ophiuchi">85 Ophiuchi</option>';
                System_Nam_options_str  += '<option value="85 Orionis">85 Orionis</option>';
                System_Nam_options_str  += '<option value="86 Draconis">86 Draconis</option>';
                System_Nam_options_str  += '<option value="86 Geminorum">86 Geminorum</option>';
                System_Nam_options_str  += '<option value="87 Draconis">87 Draconis</option>';
                System_Nam_options_str  += '<option value="88 Draconis">88 Draconis</option>';
                System_Nam_options_str  += '<option value="88 Ophiuchi">88 Ophiuchi</option>';
                System_Nam_options_str  += '<option value="89 Ursae Majoris">89 Ursae Majoris</option>';
                System_Nam_options_str  += '<option value="9 Centauri">9 Centauri</option>';
                System_Nam_options_str  += '<option value="90 Pegasi">90 Pegasi</option>';
                System_Nam_options_str  += '<option value="90 Ursae Majoris">90 Ursae Majoris</option>';
                System_Nam_options_str  += '<option value="91 Draconis">91 Draconis</option>';
                System_Nam_options_str  += '<option value="91 Orionis">91 Orionis</option>';
                System_Nam_options_str  += '<option value="92 Pegasi">92 Pegasi</option>';
                System_Nam_options_str  += '<option value="94 Ursae Majoris">94 Ursae Majoris</option>';
                System_Nam_options_str  += '<option value="96 Draconis">96 Draconis</option>';
                System_Nam_options_str  += '<option value="97 Draconis">97 Draconis</option>';
                System_Nam_options_str  += '<option value="97 Pegasi">97 Pegasi</option>';
                System_Nam_options_str  += '<option value="97 Ursae Majoris">97 Ursae Majoris</option>';
                System_Nam_options_str  += '<option value="98 Ceti">98 Ceti</option>';
                System_Nam_options_str  += '<option value="98 Pegasi">98 Pegasi</option>';
                System_Nam_options_str  += '<option value="99 Ceti">99 Ceti</option>';
                System_Nam_options_str  += '<option value="99 Leonis">99 Leonis</option>';
                System_Nam_options_str  += '<option value="99 Ursae Majoris">99 Ursae Majoris</option>';
                System_Nam_options_str  += '<option value="AD Leonis">AD Leonis</option>';
                System_Nam_options_str  += '<option value="AU Microscopii">AU Microscopii</option>';
                System_Nam_options_str  += '<option value="AX Microscopii">AX Microscopii</option>';
                System_Nam_options_str  += '<option value="Alpha Centauri">Alpha Centauri</option>';
                System_Nam_options_str  += '<option value="Alpha Leonis Minoris">Alpha Leonis Minoris</option>';
                System_Nam_options_str  += '<option value="Alpha Normae">Alpha Normae</option>';
                System_Nam_options_str  += '<option value="Alpha Velorum">Alpha Velorum</option>';
                System_Nam_options_str  += '<option value="Altair">Altair</option>';
                System_Nam_options_str  += '<option value="Barnard&apos;s Star">Barnard&apos;s Star</option>';
                System_Nam_options_str  += '<option value="Beta Antliae">Beta Antliae</option>';
                System_Nam_options_str  += '<option value="Beta Hydri">Beta Hydri</option>';
                System_Nam_options_str  += '<option value="Beta Puppis">Beta Puppis</option>';
                System_Nam_options_str  += '<option value="Beta Telescopii">Beta Telescopii</option>';
                System_Nam_options_str  += '<option value="Beta Virginis">Beta Virginis</option>';
                System_Nam_options_str  += '<option value="CD Ceti">CD Ceti</option>';
                System_Nam_options_str  += '<option value="Chi Arietis">Chi Arietis</option>';
                System_Nam_options_str  += '<option value="Chi Cephei">Chi Cephei</option>';
                System_Nam_options_str  += '<option value="Chi Draconis">Chi Draconis</option>';
                System_Nam_options_str  += '<option value="Chi Librae">Chi Librae</option>';
                System_Nam_options_str  += '<option value="DX Cancri">DX Cancri</option>';
                System_Nam_options_str  += '<option value="Delta Camelopardalis">Delta Camelopardalis</option>';
                System_Nam_options_str  += '<option value="Delta Capricorni">Delta Capricorni</option>';
                System_Nam_options_str  += '<option value="Delta Carinae">Delta Carinae</option>';
                System_Nam_options_str  += '<option value="Delta Pavonis">Delta Pavonis</option>';
                System_Nam_options_str  += '<option value="Delta Pegasi">Delta Pegasi</option>';
                System_Nam_options_str  += '<option value="Donner 91">Donner 91</option>';
                System_Nam_options_str  += '<option value="EV Lacertae">EV Lacertae</option>';
                System_Nam_options_str  += '<option value="EZ Aquarii">EZ Aquarii</option>';
                System_Nam_options_str  += '<option value="Epsilon Eridani">Epsilon Eridani</option>';
                System_Nam_options_str  += '<option value="Epsilon Horologii">Epsilon Horologii</option>';
                System_Nam_options_str  += '<option value="Epsilon Indi">Epsilon Indi</option>';
                System_Nam_options_str  += '<option value="Eta Boötis">Eta Boötis</option>';
                System_Nam_options_str  += '<option value="Eta Cassiopeiae">Eta Cassiopeiae</option>';
                System_Nam_options_str  += '<option value="Eta Monocerotis">Eta Monocerotis</option>';
                System_Nam_options_str  += '<option value="Eta Sextantis">Eta Sextantis</option>';
                System_Nam_options_str  += '<option value="FL Virginis">FL Virginis</option>';
                System_Nam_options_str  += '<option value="FN Virginis">FN Virginis</option>';
                System_Nam_options_str  += '<option value="GL Virginis">GL Virginis</option>';
                System_Nam_options_str  += '<option value="Gamma Carinae">Gamma Carinae</option>';
                System_Nam_options_str  += '<option value="Gamma Leporis">Gamma Leporis</option>';
                System_Nam_options_str  += '<option value="Gamma Telescopii">Gamma Telescopii</option>';
                System_Nam_options_str  += '<option value="Gamma Virginis">Gamma Virginis</option>';
                System_Nam_options_str  += '<option value="Gliese 290">Gliese 290</option>';
                System_Nam_options_str  += '<option value="Groombridge 34">Groombridge 34</option>';
                System_Nam_options_str  += '<option value="HD 222834">HD 222834</option>';
                System_Nam_options_str  += '<option value="HH Andromedae">HH Andromedae</option>';
                System_Nam_options_str  += '<option value="Heintz 299">Heintz 299</option>';
                System_Nam_options_str  += '<option value="Iota Comae Berenices">Iota Comae Berenices</option>';
                System_Nam_options_str  += '<option value="Kappa Camelopardalis">Kappa Camelopardalis</option>';
                System_Nam_options_str  += '<option value="Kappa Muscae">Kappa Muscae</option>';
                System_Nam_options_str  += '<option value="Kapteyn&apos;s Star">Kapteyn&apos;s Star</option>';
                System_Nam_options_str  += '<option value="Kruger 60">Kruger 60</option>';
                System_Nam_options_str  += '<option value="Lacaille 9352">Lacaille 9352</option>';
                System_Nam_options_str  += '<option value="Lalande">Lalande</option>';
                System_Nam_options_str  += '<option value="Lambda Indi">Lambda Indi</option>';
                System_Nam_options_str  += '<option value="Lambda Volantis">Lambda Volantis</option>';
                System_Nam_options_str  += '<option value="Luhman 16">Luhman 16</option>';
                System_Nam_options_str  += '<option value="Mu Camelopardalis">Mu Camelopardalis</option>';
                System_Nam_options_str  += '<option value="Mu Delphini">Mu Delphini</option>';
                System_Nam_options_str  += '<option value="Mu Pyxidis">Mu Pyxidis</option>';
                System_Nam_options_str  += '<option value="Mu Reticuli">Mu Reticuli</option>';
                System_Nam_options_str  += '<option value="Mu Tucanae">Mu Tucanae</option>';
                System_Nam_options_str  += '<option value="Mu Ursae Minoris">Mu Ursae Minoris</option>';
                System_Nam_options_str  += '<option value="Nu Crateris">Nu Crateris</option>';
                System_Nam_options_str  += '<option value="Nu Muscae">Nu Muscae</option>';
                System_Nam_options_str  += '<option value="Nu Reticuli">Nu Reticuli</option>';
                System_Nam_options_str  += '<option value="Nu Ursae Minoris">Nu Ursae Minoris</option>';
                System_Nam_options_str  += '<option value="Omega Arietis">Omega Arietis</option>';
                System_Nam_options_str  += '<option value="Omega Ceti">Omega Ceti</option>';
                System_Nam_options_str  += '<option value="Omega Gruis">Omega Gruis</option>';
                System_Nam_options_str  += '<option value="Omega Sculptoris">Omega Sculptoris</option>';
                System_Nam_options_str  += '<option value="Omicron Chamaeleontis">Omicron Chamaeleontis</option>';
                System_Nam_options_str  += '<option value="Omicron Hydri">Omicron Hydri</option>';
                System_Nam_options_str  += '<option value="Omicron Lyrae">Omicron Lyrae</option>';
                System_Nam_options_str  += '<option value="Omikron Mensae">Omikron Mensae</option>';
                System_Nam_options_str  += '<option value="P Eridani">P Eridani</option>';
                System_Nam_options_str  += '<option value="Phi Arietis">Phi Arietis</option>';
                System_Nam_options_str  += '<option value="Phi Librae">Phi Librae</option>';
                System_Nam_options_str  += '<option value="Pi Leporis">Pi Leporis</option>';
                System_Nam_options_str  += '<option value="Pi Librae">Pi Librae</option>';
                System_Nam_options_str  += '<option value="Pi Pyxidis">Pi Pyxidis</option>';
                System_Nam_options_str  += '<option value="Pi-3 Orionis">Pi-3 Orionis</option>';
                System_Nam_options_str  += '<option value="Pollux">Pollux</option>';
                System_Nam_options_str  += '<option value="Proxima Centauri">Proxima Centauri</option>';
                System_Nam_options_str  += '<option value="Psi Arietis">Psi Arietis</option>';
                System_Nam_options_str  += '<option value="Psi Cephei">Psi Cephei</option>';
                System_Nam_options_str  += '<option value="Psi Ceti">Psi Ceti</option>';
                System_Nam_options_str  += '<option value="Psi Gruis">Psi Gruis</option>';
                System_Nam_options_str  += '<option value="Psi Herculis">Psi Herculis</option>';
                System_Nam_options_str  += '<option value="QY Aurigae">QY Aurigae</option>';
                System_Nam_options_str  += '<option value="Rho Canis Majoris">Rho Canis Majoris</option>';
                System_Nam_options_str  += '<option value="Rho Librae">Rho Librae</option>';
                System_Nam_options_str  += '<option value="Ross 128">Ross 128</option>';
                System_Nam_options_str  += '<option value="SOL">SOL</option>';
                System_Nam_options_str  += '<option value="SZ Crateris">SZ Crateris</option>';
                System_Nam_options_str  += '<option value="SZ Ursae Majoris">SZ Ursae Majoris</option>';
                System_Nam_options_str  += '<option value="Sanford 128">Sanford 128</option>';
                System_Nam_options_str  += '<option value="Scholz&apos;s Star">Scholz&apos;s Star</option>';
                System_Nam_options_str  += '<option value="Sigma Cephei">Sigma Cephei</option>';
                System_Nam_options_str  += '<option value="Sigma Tucanae">Sigma Tucanae</option>';
                System_Nam_options_str  += '<option value="Sirius">Sirius</option>';
                System_Nam_options_str  += '<option value="Struve 2398">Struve 2398</option>';
                System_Nam_options_str  += '<option value="TW Piscis Austrini">TW Piscis Austrini</option>';
                System_Nam_options_str  += '<option value="TZ Arietis">TZ Arietis</option>';
                System_Nam_options_str  += '<option value="Tau Tucanae">Tau Tucanae</option>';
                System_Nam_options_str  += '<option value="Theta Corvi">Theta Corvi</option>';
                System_Nam_options_str  += '<option value="Theta Horologii">Theta Horologii</option>';
                System_Nam_options_str  += '<option value="Unknown Yellow Dwarf">Unknown Yellow Dwarf</option>';
                System_Nam_options_str  += '<option value="Upsilon Cephei">Upsilon Cephei</option>';
                System_Nam_options_str  += '<option value="V1216 Sagittarii">V1216 Sagittarii</option>';
                System_Nam_options_str  += '<option value="V547 Cassiopeiae">V547 Cassiopeiae</option>';
                System_Nam_options_str  += '<option value="Van Biesbroeck&apos;s Star">Van Biesbroeck&apos;s Star</option>';
                System_Nam_options_str  += '<option value="Van Maanens Star">Van Maanens Star</option>';
                System_Nam_options_str  += '<option value="Vyssotsky McCormic 541">Vyssotsky McCormic 541</option>';
                System_Nam_options_str  += '<option value="Woolley 9833">Woolley 9833</option>';
                System_Nam_options_str  += '<option value="Xi Boötis">Xi Boötis</option>';
                System_Nam_options_str  += '<option value="Xi Chamaeleontis">Xi Chamaeleontis</option>';
                System_Nam_options_str  += '<option value="Xi Fornacis">Xi Fornacis</option>';
                System_Nam_options_str  += '<option value="Xi Leporis">Xi Leporis</option>';
                System_Nam_options_str  += '<option value="Xi Muscae">Xi Muscae</option>';
                System_Nam_options_str  += '<option value="YZ Ceti">YZ Ceti</option>';
                System_Nam_options_str  += '<option value="Zeta Carinae">Zeta Carinae</option>';
                System_Nam_options_str  += '<option value="Zeta Herculis">Zeta Herculis</option>';
                System_Nam_options_str  += '<option value="Zeta Sextantis">Zeta Sextantis</option>';
                System_Nam_options_str  += '<option value="Zeta-1 Reticuli">Zeta-1 Reticuli</option>';
                System_Nam_options_str  += '<option value="kappa Ursae Minoris">kappa Ursae Minoris</option>';
                sel_System_Nam.innerHTML = System_Nam_options_str;
                div_System_Nam.appendChild(sel_System_Nam);

                // Lane Type Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Type = document.createElement('div');
                div_Type.id = "div_Type";
                div_Type.className= "filterselect";
                document.getElementById("menu").appendChild(div_Type);
                sel_Type = document.createElement('select');
                sel_Type.multiple = true;
                sel_Type.size = 2;
                sel_Type.id = "sel_Type";

                var lab_Type = document.createElement('div');
                lab_Type.innerHTML = 'STARLANE TYPE';
                lab_Type.className = 'filterlabel';
                div_Type.appendChild(lab_Type);

                var reset_Type = document.createElement('div');
                reset_Type.innerHTML = 'clear filter';
                reset_Type.className = 'filterlabel';
                reset_Type.onclick = function() {
                    var options = document.getElementById("sel_Type").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Type.appendChild(reset_Type);

                var Type_options_str = "";
                sel_Type.onchange = function(){filterFunc()};
                Type_options_str  += '<option value="International">INTERNATIONAL</option>';
                Type_options_str  += '<option value="National">NATIONAL</option>';
                sel_Type.innerHTML = Type_options_str;
                div_Type.appendChild(sel_Type);

                // Lane Status Select Filter
                document.getElementById("menu").appendChild(document.createElement("div"));

                var div_Status = document.createElement('div');
                div_Status.id = "div_Status";
                div_Status.className= "filterselect";
                document.getElementById("menu").appendChild(div_Status);
                sel_Status = document.createElement('select');
                sel_Status.multiple = true;
                sel_Status.size = 2;
                sel_Status.id = "sel_Status";

                var lab_Status = document.createElement('div');
                lab_Status.innerHTML = 'STARLANE STATUS';
                lab_Status.className = 'filterlabel';
                div_Status.appendChild(lab_Status);

                var reset_Status = document.createElement('div');
                reset_Status.innerHTML = 'clear filter';
                reset_Status.className = 'filterlabel';
                reset_Status.onclick = function() {
                    var options = document.getElementById("sel_Status").options;
                    for (var i=0; i < options.length; i++) {
                        options[i].selected = false;
                    }
                    filterFunc();
                };
                div_Status.appendChild(reset_Status);

                var Status_options_str = "";
                sel_Status.onchange = function(){filterFunc()};
                Status_options_str  += '<option value="In Developement">IN DEVELOPEMENT</option>';
                Status_options_str  += '<option value="Operational">OPERATIONAL</option>';
                sel_Status.innerHTML = Status_options_str;
                div_Status.appendChild(sel_Status);

            // Character Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_Character = document.createElement('div');
            div_Character.id = "div_Character";
            div_Character.className= "filterselect";
            document.getElementById("menu").appendChild(div_Character);
            sel_Character = document.createElement('select');
            sel_Character.multiple = true;
            sel_Character.size = 5;
            sel_Character.id = "sel_Character";

            var lab_Character = document.createElement('div');
            lab_Character.innerHTML = 'CHARACTER';
            lab_Character.className = 'filterlabel';
            div_Character.appendChild(lab_Character);

            var reset_Character = document.createElement('div');
            reset_Character.innerHTML = 'clear filter';
            reset_Character.className = 'filterlabel';
            reset_Character.onclick = function() {
                var options = document.getElementById("sel_Character").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Character.appendChild(reset_Character);

            var Character_options_str = "";
            sel_Character.onchange = function(){filterFunc()};
            Character_options_str  += '<option value="Abbey">Abbey</option>';
            Character_options_str  += '<option value="Alex">Alex</option>';
            Character_options_str  += '<option value="Elis">Elis</option>';
            Character_options_str  += '<option value="Thea">Thea</option>';
            Character_options_str  += '<option value="Tia">Tia</option>';
            sel_Character.innerHTML = Character_options_str;
            div_Character.appendChild(sel_Character);
            sel_Character.selectedIndex = 1;
            sel_Character.dispatchEvent(new Event('change'));

            // Book Volume Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_Book = document.createElement('div');
            div_Book.id = "div_Book";
            div_Book.className= "filterselect";
            document.getElementById("menu").appendChild(div_Book);
            sel_Book = document.createElement('select');
            sel_Book.multiple = true;
            sel_Book.size = 5;
            sel_Book.id = "sel_Book";

            var lab_Book = document.createElement('div');
            lab_Book.innerHTML = 'BOOK VOLUME';
            lab_Book.className = 'filterlabel';
            div_Book.appendChild(lab_Book);

            var reset_Book = document.createElement('div');
            reset_Book.innerHTML = 'clear filter';
            reset_Book.className = 'filterlabel';
            reset_Book.onclick = function() {
                var options = document.getElementById("sel_Book").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Book.appendChild(reset_Book);

            var Book_options_str = "";
            sel_Book.onchange = function(){filterFunc()};
            Book_options_str  += '<option value="A1">A1</option>';
            Book_options_str  += '<option value="A2">A2</option>';
            Book_options_str  += '<option value="A3">A3</option>';
            Book_options_str  += '<option value="A4">A4</option>';
            Book_options_str  += '<option value="A5">A5</option>';
            sel_Book.innerHTML = Book_options_str;
            div_Book.appendChild(sel_Book);
            sel_Book.selectedIndex = 0;
            sel_Book.dispatchEvent(new Event('change'));

            // Economic Sector Select Filter
            document.getElementById("menu").appendChild(document.createElement("div"));

            var div_Sector = document.createElement('div');
            div_Sector.id = "div_Sector";
            div_Sector.className= "filterselect";
            document.getElementById("menu").appendChild(div_Sector);
            sel_Sector = document.createElement('select');
            sel_Sector.multiple = true;
            sel_Sector.size = 5;
            sel_Sector.id = "sel_Sector";

            var lab_Sector = document.createElement('div');
            lab_Sector.innerHTML = 'ECONOMIC SECTOR';
            lab_Sector.className = 'filterlabel';
            div_Sector.appendChild(lab_Sector);

            var reset_Sector = document.createElement('div');
            reset_Sector.innerHTML = 'clear filter';
            reset_Sector.className = 'filterlabel';
            reset_Sector.onclick = function() {
                var options = document.getElementById("sel_Sector").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Sector.appendChild(reset_Sector);

            var Sector_options_str = "";
            sel_Sector.onchange = function(){filterFunc()};
            Sector_options_str  += '<option value="Agrarian Sector">Agrarian Sector</option>';
            Sector_options_str  += '<option value="Consumer Sector">Consumer Sector</option>';
            Sector_options_str  += '<option value="Autarkic Sector">Autarkic Sector</option>';
            Sector_options_str  += '<option value="Free Planets Alliance">Free Planets Alliance</option>';
            Sector_options_str  += '<option value="Frontier Sector">Frontier Sector</option>';
            Sector_options_str  += '<option value="Industrial Sector">Industrial Sector</option>';
            Sector_options_str  += '<option value="Research Sector">Research Sector</option>';
            Sector_options_str  += '<option value="Trade Sector">Trade Sector</option>';
            sel_Sector.innerHTML = Sector_options_str;
            div_Sector.appendChild(sel_Sector);

            resetLabels([layer_Regions_0,layer_Systems_2]);
            map.on("zoomend", function(){
                resetLabels([layer_Regions_0,layer_Systems_2]);
            });
            map.on("layeradd", function(){
                resetLabels([layer_Regions_0,layer_Systems_2]);
            });
            map.on("layerremove", function(){
                resetLabels([layer_Regions_0,layer_Systems_2]);
            });
        </script>
    </body>
</html>
